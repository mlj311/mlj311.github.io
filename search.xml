<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[iOS‰πã‰ªéÈù¢ÂêëÂØπË±°ÁöÑËßíÂ∫¶ÂàÜÊûêÂ¶Ç‰ΩïÊèêÈ´òOCÁöÑ‰ª£Á†ÅË¥®Èáè]]></title>
    <url>%2F2018%2F11%2F07%2FiOS%E4%B9%8B%E4%BB%8E%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%A7%92%E5%BA%A6%E5%88%86%E6%9E%90%E5%A6%82%E4%BD%95%E6%8F%90%E9%AB%98OC%E7%9A%84%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F%2F</url>
    <content type="text"><![CDATA[‰ªéÈù¢ÂêëÂØπË±°ÁöÑËßíÂ∫¶ÂàÜÊûêÂ¶Ç‰ΩïÊèêÈ´òOCÁöÑ‰ª£Á†ÅË¥®Èáè ÁêÜËß£‚Äú Â±ûÊÄß ‚ÄùËøô‰∏ÄÊ¶ÇÂøµÂ±ûÊÄßÔºà@propertyÔºâÊòØOCÁöÑ‰∏ÄÈ°πÁâπÊÄß @propertyÔºöÁºñËØëÂô®‰ºöËá™Âä®ÁîüÊàêÂÆû‰æãÂèòÈáèÂíågetterÂíåsetterÊñπÊ≥ï ‰∏ãÊñá‰∏≠ÔºågetterÂíåsetterÊñπÊ≥ïÂêàÁß∞‰∏∫Â≠òÂèñÊñπÊ≥ï For ExampleÔºö 1@property (nonatomic, strong) UIView *qiShareView; Á≠â‰ª∑‰∫é 123@synthesize qiShareView = _qiShareView;- (UIView *)qiShareView;- (void)setQiShareView:(UIView *)qiShareView; Â¶ÇÊûú‰∏çÂ∏åÊúõËá™Âä®ÁîüÊàêÂ≠òÂèñÊñπÊ≥ïÂíåÂÆû‰æãÂèòÈáèÔºåÈÇ£Â∞±Ë¶Å‰ΩøÁî®@dynamicÂÖ≥ÈîÆÂ≠ó 1@dynamic qiShareView; Â±ûÊÄßÁâπË¥®ÊúâÂõõÁ±ªÔºö 1.ÂéüÂ≠êÊÄßÔºöÈªòËÆ§‰∏∫atomic nonatomicÔºöÈùûÂéüÂ≠êÊÄßÔºåËØªÂÜôÊó∂‰∏çÂä†ÂêåÊ≠•ÈîÅ atomicÔºöÂéüÂ≠êÊÄßÔºåËØªÂÜôÊó∂Âä†ÂêåÊ≠•ÈîÅ 2.ËØªÂÜôÊùÉÈôêÔºöÈªòËÆ§‰∏∫readwrite readwriteÔºöÊã•ÊúâgetterÂíåsetterÊñπÊ≥ï readonlyÔºö‰ªÖÊã•ÊúâgetterÊñπÊ≥ï 3.ÂÜÖÂ≠òÁÆ°ÁêÜÔºö assignÔºöÂØπ‚ÄúÁ∫ØÈáèÁ±ªÂûã‚ÄùÂÅöÁÆÄÂçïËµãÂÄºÊìç‰ΩúÔºàNSInteger„ÄÅCGFloatÁ≠âÔºâ„ÄÇ strongÔºöÂº∫Êã•ÊúâÂÖ≥Á≥ªÔºåËÆæÁΩÆÊñπÊ≥ï ‰øùÁïôÊñ∞ÂÄºÔºåÂπ∂ÈáäÊîæÊóßÂÄº„ÄÇ weakÔºöÂº±Êã•ÊúâÂÖ≥Á≥ªÔºåËÆæÁΩÆÊñπÊ≥ï ‰∏ç‰øùÁïôÊñ∞ÂÄºÔºå‰∏çÈáäÊîæÊóßÂÄº„ÄÇÂΩìÊåáÈíàÊåáÂêëÁöÑÂØπË±°ÈîÄÊØÅÊó∂ÔºåÊåáÈíàÁΩÆnil„ÄÇ copyÔºöÊã∑Ë¥ùÊã•ÊúâÂÖ≥Á≥ªÔºåËÆæÊñΩÊñπÊ≥ï‰∏ç‰øùÁïôÊñ∞ÂÄºÔºåÂ∞ÜÂÖ∂Êã∑Ë¥ù„ÄÇ unsafe_unretainedÔºöÈùûÊã•ÊúâÂÖ≥Á≥ªÔºåÁõÆÊ†áÂØπË±°Ë¢´ÈáäÊîæÔºåÊåáÈíà‰∏çÁΩÆ‰∏∫nilÔºåËøô‰∏ÄÁÇπ‰∏éassgin‰∏ÄÊ†∑„ÄÇÂå∫Âà´‰∫éweak„ÄÇ 4.ÊñπÊ≥ïÂêçÔºö getter=ÔºöÊåáÂÆögetterÊñπÊ≥ïÁöÑÊñπÊ≥ïÂêçÔºåÂ∏∏Áî® setter=ÔºöÊåáÂÆösetterÊñπÊ≥ïÁöÑÊñπÊ≥ïÂêçÔºå‰∏çÂ∏∏Áî® ‰æãÂ¶ÇÔºö 1@property (nonatomic, getter=isOn) BOOL on; Âú®iOSÂºÄÂèë‰∏≠Ôºå99.99..%ÁöÑÂ±ûÊÄßÈÉΩ‰ºöÂ£∞Êòé‰∏∫nonatomic„ÄÇ ‰∏ÄÊòØatomic‰ºö‰∏•ÈáçÂΩ±ÂìçÊÄßËÉΩÔºå ‰∫åÊòØatomicÂè™ËÉΩ‰øùËØÅËØª/ÂÜôÊìç‰ΩúÁöÑËøáÁ®ãÊòØÂèØÈù†ÁöÑÔºåÂπ∂‰∏çËÉΩ‰øùËØÅÁ∫øÁ®ãÂÆâÂÖ®„ÄÇ ‰∫å„ÄÅÂú®ÂØπË±°ÂÜÖÈÉ®Â∞ΩÈáèÁõ¥Êé•ËÆøÈóÆÂÆû‰æãÂèòÈáè1.ÂÆû‰æãÂèòÈáèÔºà_Â±ûÊÄßÂêçÔºâËÆøÈóÆÂØπË±°ÁöÑÂú∫ÊôØÔºö Âú®initÂíåallocÊñπÊ≥ï‰∏≠ÔºåÊÄªÊòØÂ∫îËØ•ÈÄöËøáÂÆû‰æãÂèòÈáèËØªÂÜôÊï∞ÊçÆ Ê≤°ÊúâÈáçÂÜôsetterÂíågetterÊñπÊ≥ïÔºå‰πüÊ≤°Êúâ‰ΩøÁî®KVOÁõëÂê¨ Â•ΩÂ§ÑÔºö‰∏çËµ∞OCÊñπÊ≥ïÁöÑÊ¥æÂèëÊú∫Âà∂ÔºåÁõ¥Êé•ËÆøÈóÆÂÜÖÂ≠òËØªÂÜôÔºåÈÄüÂ∫¶Âø´ÔºåÊïàÁéáÈ´ò For ExampleÔºö 123456789- (instancetype)initWithDic:(NSDictionary *)dic &#123; self = [super init]; if (self) &#123; _qi = dic[@&quot;qi&quot;]; _share = dic[@&quot;share&quot;]; &#125; return self;&#125; 2.Áî®Â≠òÂèñÊñπÊ≥ïËÆøÈóÆÂØπË±°ÁöÑÂú∫ÊôØÔºö ÈáçÂÜôgetter/setterÊñπÊ≥ïÔºàÊØîÂ¶ÇÔºöÊáíÂä†ËΩΩÔºâ ‰ΩøÁî®KVOÁõëÂê¨ÂÄºÁöÑÊîπÂèò For ExampleÔºö 123456- (UIView *)qiShareView &#123; if (!_qiShareView) &#123; _qiShareView = [UIView new]; &#125; return _qiShareView;&#125; ‰∏â„ÄÅÁêÜËß£‚ÄúÂØπË±°Á≠âÂêåÊÄß‚Äù12345NSString *aString = @&quot;iPhone 8&quot;;NSString *bString = [NSString stringWithFormat:@&quot;iPhone %i&quot;, 8];NSLog(@&quot;%d&quot;, [aString isEqual:bString]);NSLog(@&quot;%d&quot;, [aString isEqualToString:bString]);NSLog(@&quot;%d&quot;, aString == bString); ËøôÊÆµ‰ª£Á†ÅËæìÂá∫ÁöÑÊòØ1Ôºõ1Ôºõ0„ÄÇ ==Êìç‰ΩúÁ¨¶Âè™ÊòØÊØîËæÉ‰∫Ü‰∏§‰∏™ÊåáÈíàÊâÄÊåáÂØπË±°ÁöÑÂú∞ÂùÄÊòØÂê¶Áõ∏ÂêåÔºåËÄå‰∏çÊòØÊåáÈíàÊâÄÊåáÁöÑÂØπË±°ÁöÑÂÄº„ÄÇ ÊâÄ‰ª•ÊúÄÂêé‰∏Ä‰∏™‰∏∫0„ÄÇ Âõõ„ÄÅ‰ª•Á±ªÊóèÊ®°ÂºèÈöêËóèÂÆûÁé∞ÁªÜËäÇ1234id maybeAnArray = @[];if ([maybeAnArray class] == [NSArray class]) &#123; //Code will never be executed&#125; Ëøô‰∏™ÂßãÁªàÊú™false„ÄÇÂéüÂõ†Ôºö[maybeAnArray class]ÁöÑËøîÂõûÊ∞∏Ëøú‰∏ç‰ºöÊòØNSArray, NSArrayÊòØ‰∏Ä‰∏™Á±ªÊóèÔºåËøîÂõûÁöÑÂÄº‰∏ÄÁõ¥ÈÉΩÊòØNSArrayÁöÑÂÆû‰ΩìÂ≠êÁ±ª„ÄÇÂ§ßÈÉ®ÂàÜcollectionÁ±ªÈÉΩÊòØÊüê‰∏™Á±ªÊóè‰∏≠ÁöÑÊäΩË±°Âü∫Á±ª„ÄÇ ÊâÄ‰ª•‰∏äÈù¢ÁöÑifÊÉ≥Ë¶ÅÊúâÊú∫‰ºöÊâßË°åÁöÑËØùË¶ÅÊîπÊàê 1234id maybeAnArray = @[];if ([maybeAnArray isKindOfClass [NSArray class]) &#123; // Code probably be executed&#125; ËøôÊ†∑Âà§Êñ≠ÁöÑÊÑèÊÄùÊòØÔºåmaybeAnArrayËøô‰∏™ÂØπË±°ÊòØÂê¶ÊòØNSArrayÁ±ªÊóè‰∏≠ÁöÑ‰∏ÄÂëò ‰ΩøÁî®Á±ªÊóèÁöÑÂ•ΩÂ§ÑÔºöÂèØ‰ª•ÊääÂÆûÁé∞ÁªÜËäÇÈöêËóèÂú®‰∏ÄÂ•óÁÆÄÂçïÁöÑÂÖ¨ÂÖ±Êé•Âè£ÂêéÈù¢ ‰∫î„ÄÅÂú®Êó¢ÊúâÁ±ª‰∏≠‰ΩøÁî®ÂÖ≥ËÅîÂØπË±°Â≠òÊîæËá™ÂÆö‰πâÊï∞ÊçÆÂÖàÂºïÂÖ•runtimeÁ±ªÂ∫ì1#import objc_AssociationPolicyÔºàÂØπË±°ÂÖ≥ËÅîÁ≠ñÁï•Á±ªÂûãÔºâ: ‰∏â‰∏™ÊñπÊ≥ïÁÆ°ÁêÜÂÖ≥ËÅîÂØπË±°Ôºöobjc_setAssociatedObjectÔºàËÆæÁΩÆÂÖ≥ËÅîÂØπË±°Ôºâ 1234567891011/** * Sets an associated value for a given object using a given key and association policy. * * @param object The source object for the association. * @param key The key for the association. * @param value The value to associate with the key key for object. Pass nil to clear an existing association. * @param policy The policy for the association. For possible values, see ‚ÄúAssociative Object Behaviors.‚Äù */OBJC_EXPORT voidobjc_setAssociatedObject(id _Nonnull object, const void * _Nonnull key, id _Nullable value, objc_AssociationPolicy policy) objc_getAssociatedObjectÔºàËé∑ÂæóÂÖ≥ËÅîÂØπË±°Ôºâ 12345678910/** * Returns the value associated with a given object for a given key. * * @param object The source object for the association. * @param key The key for the association. * * @return The value associated with the key \e key for \e object. */OBJC_EXPORT id _Nullableobjc_getAssociatedObject(id _Nonnull object, const void * _Nonnull key) objc_removeAssociatedObjectsÔºàÂéªÈô§ÂÖ≥ËÅîÂØπË±°Ôºâ 1234567891011121314/** * Removes all associations for a given object. * * @param object An object that maintains associated objects. * * @note The main purpose of this function is to make it easy to return an object * to a &quot;pristine state‚Äù. You should not use this function for general removal of * associations from objects, since it also removes associations that other clients * may have added to the object. Typically you should use \c objc_setAssociatedObject * with a nil value to clear an association. * */OBJC_EXPORT voidobjc_removeAssociatedObjects(id _Nonnull object) Â∞èÁªìÔºö ÂèØ‰ª•ÈÄöËøá‚ÄúÂÖ≥ËÅîÂØπË±°‚ÄùÊú∫Âà∂ÂèØ‰ª•Êää‰∏§‰∏™ÂØπË±°ËÅîÁ≥ªËµ∑Êù• ÂÆö‰πâÂÖ≥ËÅîÂØπË±°ÂèØ‰ª•ÊåáÂÆöÂÜÖÂ≠òÁÆ°ÁêÜÁ≠ñÁï• Â∫îÁî®Âú∫ÊôØÔºöÂè™ÊúâÂú®ÂÖ∂‰ªñÂÅöÊ≥ïÔºà‰ª£ÁêÜ„ÄÅÈÄöÁü•Á≠âÔºâ‰∏çÂèØË°åÊó∂ÔºåÊâç‰ºöÈÄâÊã©‰ΩøÁî®ÂÖ≥ËÅîÂØπË±°„ÄÇËøôÁßçÂÅöÊ≥ïÈöæ‰∫éÊâæbug„ÄÇ ÂÖ≠„ÄÅÁêÜËß£objc_msgSendÔºàÂØπË±°ÁöÑÊ∂àÊÅØ‰º†ÈÄíÊú∫Âà∂ÔºâÈ¶ñÂÖàÊàë‰ª¨Ë¶ÅÂå∫ÂàÜ‰∏§‰∏™Âü∫Êú¨Ê¶ÇÂøµÔºö ÈùôÊÄÅÁªëÂÆöÔºàstatic bindingÔºâÔºöÂú®ÁºñËØëÊúüÂ∞±ÂÜ≥ÂÆöËøêË°åÊó∂ÊâÄÂ∫îË∞ÉÁî®ÁöÑÂáΩÊï∞„ÄÇ‰ª£Ë°®ËØ≠Ë®ÄÔºöC„ÄÅC++Á≠â Âä®ÊÄÅÁªëÂÆöÔºàdynamic bindingÔºâÔºöÊâÄË¶ÅË∞ÉÁî®ÁöÑÂáΩÊï∞Áõ¥Âà∞ËøêË°åÊúüÊâçËÉΩÁ°ÆÂÆö„ÄÇ‰ª£Ë°®ËØ≠Ë®ÄÔºöOC„ÄÅswiftÁ≠â OCÊòØÈó®Âº∫Â§ßÁöÑÂä®ÊÄÅËØ≠Ë®ÄÔºåÂÆÉÁöÑÂä®ÊÄÅÊÄßÊèêÁé∞Âú®ÂÆÉÂº∫Â§ßÁöÑruntimeÊú∫Âà∂‰∏ä„ÄÇ Ëß£ÈáäÔºöÂú®OC‰∏≠ÔºåÂ¶ÇÊûúÂêëÊüêÂØπË±°‰º†ÈÄíÊ∂àÊÅØÔºåÈÇ£Â∞±‰ºö‰ΩøÁî®Âä®ÊÄÅÁªëÂÆöÊú∫Âà∂Êù•ÂÜ≥ÂÆöÈúÄË¶ÅË∞ÉÁî®ÁöÑÊñπÊ≥ï„ÄÇÂú®Â∫ïÂ±ÇÔºåÊâÄÊúâÊñπÊ≥ïÈÉΩÊòØÊôÆÈÄöÁöÑCËØ≠Ë®ÄÂáΩÊï∞ÔºåÁÑ∂ËÄåÂØπË±°Êî∂Âà∞Ê∂àÊÅØÂêéÔºåÁî±ËøêË°åÊúüÂÜ≥ÂÆöÁ©∂Á´üË∞ÉÁî®Âì™‰∏™ÊñπÊ≥ïÔºåÁîöËá≥ÂèØ‰ª•Âú®Á®ãÂ∫èËøêË°åÊó∂ÊîπÂèòÔºåËøô‰∫õÁâπÊÄß‰ΩøÂæóOCÊàê‰∏∫‰∏ÄÈó®Âº∫Â§ßÁöÑÂä®ÊÄÅËØ≠Ë®Ä„ÄÇ Â∫ïÂ±ÇÂÆûÁé∞ÔºöÂü∫‰∫éCËØ≠Ë®ÄÂáΩÊï∞ÂÆûÁé∞„ÄÇ ÂÆûÁé∞ÁöÑÂü∫Êú¨ÂáΩÊï∞ÊòØobjc_msgSendÔºåÂÆö‰πâÂ¶Ç‰∏ãÔºö 1void objc_msgSend(id self, SEL cmd, ...) ËøôÊòØ‰∏Ä‰∏™ÂèÇÊï∞‰∏™Êï∞ÂèØÂèòÁöÑÂáΩÊï∞ÔºåÁ¨¨‰∏ÄÂèÇÊï∞‰ª£Ë°®Êé•ÂèóËÄÖÔºåÁ¨¨‰∫å‰∏™ÂèÇÊï∞‰ª£Ë°®ÈÄâÊã©Â≠êÔºàOCÂáΩÊï∞ÂêçÔºâÔºå‰πãÂêéÁöÑÂèÇÊï∞Â∞±ÊòØÊ∂àÊÅØ‰∏≠‰º†ÂÖ•ÁöÑÂèÇÊï∞„ÄÇ ‰∏æ‰æãÔºögitÊèê‰∫§ 1id return = [git commit:parameter]; ‰∏äÈù¢ÁöÑÊñπÊ≥ï‰ºöÂú®ËøêË°åÊó∂ËΩ¨Êç¢ÊàêÂ¶Ç‰∏ãÁöÑOCÂáΩÊï∞Ôºö 1id return = objc_msgSend(git, @selector(commit), parameter); objc_msgSendÂáΩÊï∞‰ºöÂú®Êé•Êî∂ËÄÖÊâÄÂ±ûÁöÑÁ±ª‰∏≠ÊêúÂØªÂÖ∂ÊñπÊ≥ïÂàóË°®ÔºåÂ¶ÇÊûúËÉΩÊâæÂà∞Ëøô‰∏™Ë∑üÈÄâÊã©Â≠êÂêçÁß∞Áõ∏ÂêåÁöÑÊñπÊ≥ïÔºåÂ∞±Ë∑≥ËΩ¨Âà∞ÂÖ∂ÂÆûÁé∞‰ª£Á†ÅÔºåÂæÄ‰∏ãÊâßË°å„ÄÇËã•ÊòØÂΩìÂâçÁ±ªÊ≤°ÊâæÂà∞ÔºåÈÇ£Â∞±Ê≤øÁùÄÁªßÊâø‰ΩìÁ≥ªÁªßÁª≠Âêë‰∏äÊü•ÊâæÔºåÁ≠âÊâæÂà∞ÂêàÈÄÇÊñπÊ≥ï‰πãÂêéÂÜçË∑≥ËΩ¨ ÔºåÂ¶ÇÊûúÊúÄÁªàËøòÊòØÊâæ‰∏çÂà∞ÔºåÈÇ£Â∞±ËøõÂÖ•Ê∂àÊÅØËΩ¨ÂèëÔºà‰∏ã‰∏ÄÊù°ÂÖ∑‰ΩìÂ±ïÂºÄÔºâÁöÑÊµÅÁ®ãÂéªËøõË°åÂ§ÑÁêÜ‰∫Ü„ÄÇ ÂèØÊòØÂ¶ÇÊûúÊØèÊ¨°‰º†ÈÄíÊ∂àÊÅØÈÉΩË¶ÅÊääÁ±ª‰∏≠ÁöÑÊñπÊ≥ïÈÅçÂéÜ‰∏ÄÈÅçÔºåËøô‰πàÂ§öÊ∂àÊÅØ‰º†ÈÄíÂä†Ëµ∑Êù•ËÇØÂÆö‰ºöÂæàËÄóÊÄßËÉΩ„ÄÇÊâÄ‰ª•‰ª•‰∏ãËÆ≤Ëß£OCÊ∂àÊÅØ‰º†ÈÄíÁöÑ‰ºòÂåñÊñπÊ≥ï„ÄÇ OCÂØπÊ∂àÊÅØ‰º†ÈÄíÁöÑ‰ºòÂåñÔºöÂø´ÈÄüÊò†Â∞ÑË°®ÔºàÁºìÂ≠òÔºâ‰ºòÂåñÔºö objc_msgSendÂú®ÊêúÁ¥¢ËøôÂùóÊòØÊúâÂÅöÁºìÂ≠òÁöÑÔºåÊØè‰∏™OCÁöÑÁ±ªÈÉΩÊúâ‰∏ÄÂùóËøôÊ†∑ÁöÑÁºìÂ≠òÔºåobjc_msgSend‰ºöÂ∞ÜÂåπÈÖçÁªìÊûúÁºìÂ≠òÂú®Âø´ÈÄüÊò†Â∞ÑË°®(fast map)‰∏≠ÔºåËøôÊ†∑‰ª•Êù•Ëøô‰∏™Á±ª‰∏Ä‰∫õÈ¢ëÁπÅË∞ÉÁî®ÁöÑÊñπÊ≥ï‰ºöÂá∫Áé∞Âú®fast map ‰∏≠Ôºå‰∏çÁî®ÂÜçÂéª‰∏ÄÈÅç‰∏ÄÈÅçÁöÑÂú®ÊñπÊ≥ïÂàóË°®‰∏≠ÊêúÁ¥¢‰∫Ü„ÄÇ Â∞æË∞ÉÁî®‰ºòÂåñÔºö ÂéüÁêÜÔºöÂú®ÂáΩÊï∞Êú´Â∞æË∞ÉÁî®Êüê‰∏™‰∏çÂê´ËøîÂõûÂÄºÂáΩÊï∞Êó∂ÔºåÁºñËØëÂô®‰ºöËá™Âä®ÊääÊ†àÁ©∫Èó¥ÁöÑÂÜÖÂ≠òÈáçÊñ∞ËøõË°åÂàÜÈÖçÔºåÁõ¥Êé•ÈáäÊîæÊâÄÊúâË∞ÉÁî®ÂáΩÊï∞ÂÜÖÈÉ®ÁöÑÂ±ÄÈÉ®ÂèòÈáèÔºåÂ≠òÂÇ®Ë∞ÉËΩ¨Ëá≥Âè¶‰∏ÄÂáΩÊï∞ÈúÄË¶ÅÁöÑÊåá‰ª§Á†ÅÔºåÁÑ∂ÂêéÁõ¥Êé•ËøõÂÖ•Ë¢´Ë∞ÉÁî®ÂáΩÊï∞ÁöÑÂú∞ÂùÄ„ÄÇÔºà‰ªéËÄå‰∏çÈúÄË¶Å‰∏∫Ë∞ÉÁî®ÂáΩÊï∞ÂáÜÂ§áÈ¢ùÂ§ñÁöÑ‚ÄúÊ†àÂ∏ß‚ÄùÔºàframe stackÔºâÔºâ Â•ΩÂ§ÑÔºöÊúÄÂ§ßÈôêÂ∫¶ÁöÑÂêàÁêÜÁöÑÂàÜÈÖç‰ΩøÁî®ÁöÑËµÑÊ∫êÔºåÈÅøÂÖçËøáÊó©ÂèëÁîüÊ†àÊ∫¢Âá∫ÁöÑÁé∞Ë±°„ÄÇ ÔºàËøô‰∏ÄÂùóÂÅèÂ∫ïÂ±ÇÔºå‰ª•‰∏äÊòØÂ∞èÁºñÁöÑ‰∏™‰∫∫ÁêÜËß£„ÄÇË∑ØËøáÁöÑÂ§ßÁ•ûÂ¶ÇÊûúÊúâÊõ¥Â•ΩÁöÑÊõ¥Ê∑±ÁöÑËßÅËß£ÔºåÊ¨¢ËøéÂ§ßÁ•ûÁïôË®Ä‰∏éÊàë‰ª¨ËÆ®ËÆ∫Ôºâ ‰∏É„ÄÅÁêÜËß£Ê∂àÊÅØËΩ¨ÂèëÊú∫Âà∂È¶ñÂÖàÂå∫ÂàÜ‰∏§‰∏™Âü∫Êú¨Ê¶ÇÂøµÔºö 1 .Ê∂àÊÅØ‰º†ÈÄíÔºöÂØπË±°Ê≠£Â∏∏Ëß£ËØªÊ∂àÊÅØÔºå‰º†ÈÄíËøáÂéªÔºàËßÅ‰∏ä‰∏ÄÊù°Ôºâ„ÄÇ 2 .Ê∂àÊÅØËΩ¨ÂèëÔºöÂØπË±°Êó†Ê≥ïËß£ËØªÊ∂àÊÅØÔºå‰πãÂêéËøõË°åÊ∂àÊÅØËΩ¨Âèë„ÄÇ Ê∂àÊÅØËΩ¨ÂèëÂÆåÊï¥ÊµÅÁ®ãÂõæÔºö ÊµÅÁ®ãËß£ÈáäÔºö Á¨¨‰∏ÄÊ≠•ÔºöË∞ÉÁî®resolveInstanceMethodÔºöÂæÅËØ¢Êé•ÂèóËÄÖÔºàÊâÄÂ±ûÁöÑÁ±ªÔºâÊòØÂê¶ÂèØ‰ª•Ê∑ªÂä†ÊñπÊ≥ï‰ª•Â§ÑÁêÜÊú™Áü•ÁöÑÈÄâÊã©Â≠êÔºü(Ê≠§ËøáÁ®ãÁß∞‰∏∫Âä®ÊÄÅÊñπÊ≥ïËß£ÊûêÔºâËã•ÊúâÔºåËΩ¨ÂèëÁªìÊùü„ÄÇËã•Ê≤°ÊúâÔºåËµ∞Á¨¨‰∫åÊ≠•„ÄÇ Á¨¨‰∫åÊ≠•ÔºöË∞ÉÁî®forwardingTargetForSelectorÔºöËØ¢ÈóÆÊé•ÂèóËÄÖÊòØÂê¶ÊúâÂÖ∂‰ªñÂØπË±°ËÉΩÂ§ÑÁêÜÊ≠§Ê∂àÊÅØ„ÄÇËã•ÊúâÔºåËΩ¨ÂèëÁªìÊùüÔºå‰∏ÄÂàáÂ¶ÇÂ∏∏„ÄÇËã•Ê≤°ÊúâÔºåËµ∞Á¨¨‰∏âÊ≠•„ÄÇ Á¨¨‰∏âÊ≠•ÔºöË∞ÉÁî®forwardInvocationÔºöËøêË°åÊúüÁ≥ªÁªüÂ∞ÜÊ∂àÊÅØÂ∞ÅË£ÖÂà∞NSInvocationÂØπË±°‰∏≠ÔºåÂÜçÁªôÊé•ÂèóËÄÖ‰∏ÄÊ¨°Êú∫‰ºö„ÄÇ ÊúÄÂêéÔºö‰ª•‰∏ä‰∏âÊ≠•Ëøò‰∏çË°åÔºåÂ∞±ÊäõÂá∫ÂºÇÂ∏∏Ôºöunrecognized selector sent to instance xxxx ÂÖ´„ÄÅÁî®‚ÄúÊñπÊ≥ïË∞ÉÈÖçÊäÄÊúØ‚ÄùË∞ÉËØï‚ÄúÈªëÁõíÊñπÊ≥ï‚ÄùÊñπÊ≥ïË∞ÉÈÖçÔºàMethod SwizzlingÔºâÔºö‰ΩøÁî®Âè¶‰∏ÄÁßçÊñπÊ≥ïÂÆûÁé∞Êù•ÊõøÊç¢ÂéüÊúâÁöÑÊñπÊ≥ïÂÆûÁé∞„ÄÇÔºàÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåÂ∏∏Áî®Ê≠§ÊäÄÊúØÂêëÂéüÊúâÂÆûÁé∞‰∏≠Ê∑ªÂä†Êñ∞ÁöÑÂäüËÉΩ„ÄÇÔºâ ‰∏§‰∏™Â∏∏Áî®ÁöÑÊñπÊ≥ïÔºö Ëé∑ÂèñÁªôÂÆöÁ±ªÁöÑÊåáÂÆöÂÆû‰æãÊñπÊ≥ïÔºö 1234567891011121314/** * Returns a specified instance method for a given class. * * @param cls The class you want to inspect. * @param name The selector of the method you want to retrieve. * * @return The method that corresponds to the implementation of the selector specified by * \e name for the class specified by \e cls, or \c NULL if the specified class or its * superclasses do not contain an instance method with the specified selector. * * @note This function searches superclasses for implementations, whereas \c class_copyMethodList does not. */OBJC_EXPORT Method _Nullableclass_getInstanceMethod(Class _Nullable cls, SEL _Nonnull name) ‰∫§Êç¢‰∏§ÁßçÊñπÊ≥ïÂÆûÁé∞ÁöÑÊñπÊ≥ïÔºö 12345678910111213141516/** * Exchanges the implementations of two methods. * * @param m1 Method to exchange with second method. * @param m2 Method to exchange with first method. * * @note This is an atomic version of the following: * \code * IMP imp1 = method_getImplementation(m1); * IMP imp2 = method_getImplementation(m2); * method_setImplementation(m1, imp2); * method_setImplementation(m2, imp1); * \endcode */OBJC_EXPORT voidmethod_exchangeImplementations(Method _Nonnull m1, Method _Nonnull m2) Âà©Áî®Ëøô‰∏§‰∏™ÊñπÊ≥ïÂ∞±ÂèØ‰ª•‰∫§Êç¢ÊåáÂÆöÁ±ª‰∏≠ÁöÑÊåáÂÆöÊñπÊ≥ï„ÄÇÂú®ÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåÊàë‰ª¨‰ºöÈÄöËøáËøôÁßçÊñπÂºè‰∏∫Êó¢ÊúâÊñπÊ≥ïÊ∑ªÂä†Êñ∞ÂäüËÉΩ„ÄÇ For ExampleÔºö‰∫§Êç¢method1‰∏émethod2ÁöÑÊñπÊ≥ïÂÆûÁé∞ 123Method method1 = class_getInstanceMethod(self, @selector(method1:));Method method2 = class_getInstanceMethod(self, @selector(method2:));method_exchangeImplementations(method1, method2); ‰πù„ÄÅÁêÜËß£‚ÄúÁ±ªÂØπË±°‚ÄùÁöÑÁî®ÊÑèObjective-CÁ±ªÊòØÁî±ClassÁ±ªÂûãÊù•Ë°®Á§∫ÁöÑÔºåÂÆûË¥®ÊòØ‰∏Ä‰∏™ÊåáÂêëobjc_classÁªìÊûÑ‰ΩìÁöÑÊåáÈíà„ÄÇÂÆÉÁöÑÂÆö‰πâÂ¶Ç‰∏ãÔºö 1typedef struct objc_class *Class; Âú®‰∏≠ËÉΩÁúãÂà∞‰ªñÁöÑÂÆûÁé∞Ôºö 1234567891011121314151617struct objc_class &#123; Class _Nonnull isa OBJC_ISA_AVAILABILITY; //!&lt; ÊåáÂêëmetaClass(ÂÖÉÁ±ª)ÁöÑÊåáÈíà#if !__OBJC2__ Class _Nullable super_class OBJC2_UNAVAILABLE; //!&lt; Áà∂Á±ª const char * _Nonnull name OBJC2_UNAVAILABLE; //!&lt; Á±ªÂêç long version OBJC2_UNAVAILABLE; //!&lt; Á±ªÁöÑÁâàÊú¨‰ø°ÊÅØÔºåÈªòËÆ§‰∏∫0 long info OBJC2_UNAVAILABLE; //!&lt; Á±ª‰ø°ÊÅØÔºå‰æõËøêË°åÊúü‰ΩøÁî®ÁöÑ‰∏Ä‰∫õ‰ΩçÊ†áËØÜ long instance_size OBJC2_UNAVAILABLE; //!&lt; ËØ•Á±ªÁöÑÂÆû‰æãÂèòÈáèÂ§ßÂ∞è struct objc_ivar_list * _Nullable ivars OBJC2_UNAVAILABLE; //!&lt; ËØ•Á±ªÁöÑÊàêÂëòÂèòÈáèÈìæË°® struct objc_method_list * _Nullable * _Nullable methodLists OBJC2_UNAVAILABLE; //!&lt; ÊñπÊ≥ïÂÆö‰πâÁöÑÈìæË°® struct objc_cache * _Nonnull cache OBJC2_UNAVAILABLE; //!&lt; ÊñπÊ≥ïÁºìÂ≠òË°® struct objc_protocol_list * _Nullable protocols OBJC2_UNAVAILABLE; //!&lt; ÂçèËÆÆÈìæË°®#endif&#125; OBJC2_UNAVAILABLE;/* Use `Class` instead of `struct objc_class *` */ Ê≠§ÁªìÊûÑ‰ΩìÂ≠òÊîæÁöÑÊòØÁ±ªÁöÑ‚ÄúÂÖÉÊï∞ÊçÆ‚ÄùÔºàmetadata)Ôºå‰æãÂ¶ÇÁ±ªÁöÑÂÆû‰æãÂÆûÁé∞‰∫ÜÂá†‰∏™ÊñπÊ≥ïÔºåÁà∂Á±ªÊòØË∞ÅÔºåÂÖ∑Â§áÂ§öÂ∞ëÂÆû‰æãÂèòÈáèÁ≠â‰ø°ÊÅØ„ÄÇ ËøôÈáåÁöÑisaÊåáÈíàÊåáÂêëÁöÑÊòØÂè¶Â§ñ‰∏Ä‰∏™Á±ªÂè´ÂÅöÂÖÉÁ±ªÔºàmetaClass)„ÄÇÈÇ£‰ªÄ‰πàÊòØÂÖÉÁ±ªÂë¢ÔºüÂÖÉÁ±ªÊòØÁ±ªÂØπË±°ÁöÑÁ±ª„ÄÇ‰πüÂèØ‰ª•Êç¢‰∏ÄÁßçÂÆπÊòìÁêÜËß£ÁöÑËØ¥Ê≥ïÔºö 1„ÄÅÂΩì‰Ω†ÁªôÂØπË±°ÂèëÈÄÅÊ∂àÊÅØÊó∂ÔºåruntimeÂ§ÑÁêÜÊó∂ÊòØÂú®Ëøô‰∏™ÂØπË±°ÁöÑÁ±ªÁöÑÊñπÊ≥ïÂàóË°®‰∏≠ÂØªÊâæ 2„ÄÅÂΩì‰Ω†ÁªôÁ±ªÂèëÊ∂àÊÅØÊó∂ÔºåruntimeÂ§ÑÁêÜÊó∂ÊòØÂú®Ëøô‰∏™Á±ªÁöÑÂÖÉÁ±ªÁöÑÊñπÊ≥ïÂàóË°®‰∏≠ÂØªÊâæ Êàë‰ª¨Êù•Áúã‰∏Ä‰∏™ÂæàÁªèÂÖ∏ÁöÑÂõæÊù•Âä†Ê∑±ÁêÜËß£Ôºö ÂèØ‰ª•ÊÄªÁªìÂ¶Ç‰∏ãÔºö 1„ÄÅÊØè‰∏Ä‰∏™ClassÈÉΩÊúâ‰∏Ä‰∏™isaÊåáÈíàÊåáÂêë‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑMeta ClassÔºàÂÖÉÁ±ªÔºâ 2„ÄÅÊØè‰∏Ä‰∏™Meta ClassÁöÑisaÊåáÈíàÈÉΩÊåáÂêëÊúÄ‰∏äÂ±ÇÁöÑMeta ClassÔºåËøô‰∏™Meta ClassÊòØNSObjectÁöÑMeta Class„ÄÇ(ÂåÖÊã¨NSObjectÁöÑMeta ClassÁöÑisaÊåáÈíà‰πüÊòØÊåáÂêëÁöÑNSObjectÁöÑMeta Class) 3„ÄÅÊØè‰∏Ä‰∏™Meta ClassÁöÑsuper classÊåáÈíàÊåáÂêëÂÆÉÂéüÊú¨ClassÁöÑ Super ClassÁöÑMeta Class (ËøôÈáåÊúÄ‰∏äÂ±ÇÁöÑNSObjectÁöÑMeta ClassÁöÑsuper classÊåáÈíàËøòÊòØÊåáÂêëËá™Â∑±) 4„ÄÅÊúÄ‰∏äÂ±ÇÁöÑNSObject ClassÁöÑsuper classÊåáÂêë nil ËΩ¨ËΩΩÂú∞ÂùÄ]]></content>
      <categories>
        <category>learn</category>
      </categories>
      <tags>
        <tag>ÊèêÈ´ò‰ª£Á†ÅË¥®Èáè</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS‰πãARC]]></title>
    <url>%2F2018%2F11%2F06%2FiOS%E4%B9%8BARC%2F</url>
    <content type="text"><![CDATA[ARC ÂÜÖÂ≠òÁÆ°ÁêÜARCÔºàËá™Âä®ÂºïÁî®ËÆ°Êï∞ÔºâÊòØiOS5„ÄÅmacOS10.7ÂºïÂÖ•ÁöÑÂÜÖÂ≠òÁÆ°ÁêÜÊäÄÊúØÔºå‰∏∫‰∫ÜÂæ™Â∫èÊ∏êËøõÁöÑÊñπÂºè‰∫ÜËß£ËøôÈ°πÊäÄÊúØÔºåÊú¨‰π¶ÂÖà‰ªéARCÊó†ÊïàÁöÑÁéØÂ¢ÉËØ¥Ëµ∑Ôºå‰πüÂ∞±ÊòØÂ∏∏ÊåáÁöÑMRCÔºàÊâãÂä®ÂºïÁî®ËÆ°Êï∞ÔºâÁéØÂ¢É„ÄÇ ÂÜÖÂ≠òÁÆ°ÁêÜÁöÑÊÄùËÄÉÊñπÂºè Ëá™Â∑±ÁîüÊàêÁöÑÂØπË±°ÔºåËá™Â∑±ÊâÄÊåÅÊúâ„ÄÇ ÈùûËá™Â∑±ÁîüÊàêÁöÑÂØπË±°ÔºåËá™Â∑±‰πüËÉΩÊåÅÊúâ„ÄÇ ‰∏çÂÜçÈúÄË¶ÅËá™Â∑±ÊåÅÊúâÁöÑÂØπË±°Êó∂ÈáäÊîæ„ÄÇ ÈùûËá™Â∑±ÊåÅÊúâÁöÑÂØπË±°Êó†Ê≥ïÈáäÊîæ„ÄÇ ËøôÈáåÁöÑ‚ÄúËá™Â∑±‚ÄùÁêÜËß£‰∏∫ÁºñÁ®ã‰∫∫ÂëòËá™Ë∫´„ÄÇ‰∏é‚ÄúÁîüÊàê‚Äù„ÄÅ‚ÄúÊåÅÊúâ‚Äù„ÄÅ‚ÄúÈáäÊîæ‚ÄùÊìç‰ΩúÂπ∂ÂàóÁöÑËøòÊúâ‚ÄúÂ∫üÂºÉ‚ÄùÔºåÂàÜÂà´ÂØπÂ∫î‰ª•‰∏ãÊñπÊ≥ïÔºö ÂØπË±°Êìç‰ΩúObjective-CÊñπÊ≥ïÁîüÊàêÂπ∂ÊåÅÊúâÂØπË±°alloc/new/copy/mutableCopyÁ≠âÊñπÊ≥ïÊåÅÊúâÂØπË±°retainÊñπÊ≥ïÈáäÊîæÂØπË±°releaseÊñπÊ≥ïÂ∫üÂºÉÂØπË±°deallocÊñπÊ≥ï Ê≥®ÊÑèÔºö‰ª•‰∏äÊñπÊ≥ïÂåÖÂê´Âú®CocoaÊ°ÜÊû∂‰∏≠ËÄåÈùûObjective-CËØ≠Ë®Ä‰∏≠„ÄÇ Ëá™Â∑±ÁîüÊàêÁöÑÂØπË±°ÔºåËá™Â∑±ÊâÄÊåÅÊúâ‰ª•‰∏ãÈù¢ÂêçÁß∞ÂºÄÂ§¥ÁöÑÊñπÊ≥ïÁîüÊàêÁöÑÂØπË±°‰∏∫Ëá™Â∑±ÊåÅÊúâÔºö alloc new copy mutableCopy 12id obj1 = [[NSObject alloc] init];// Ëá™Â∑±ÁîüÊàêÂπ∂ÊåÅÊúâid obj2 = [NSObject new];// Ëá™Â∑±ÁîüÊàêÂπ∂ÊåÅÊúâ Âè¶Â§ñÔºåÊ†πÊçÆ‰ª•‰∏äÂéüÂàôÔºå‰∏ãÂàóÊñπÊ≥ï‰πüÊÑèÂë≥ÁùÄËá™Â∑±ÁîüÊàêÂπ∂ÊåÅÊúâÂØπË±°Ôºö allocMyObject newThatObject copyThis mutableCopyYourObject 1234567id obj = [MyObject allocMyObject]; // ÂÜÖÈÉ®ÂÆûÁé∞+ (MyObject *)allocMyObject &#123; MyObject *obj = [[MyObject alloc] init]; return obj;&#125; ÈùûËá™Â∑±ÁîüÊàêÁöÑÂØπË±°ÔºåËá™Â∑±‰πüËÉΩÊåÅÊúâalloc/new/copy/mutableCopy‰ª•Â§ñÊñπÊ≥ïÂèñÂæóÂØπË±°ÔºåÈùûËá™Â∑±ÁîüÊàêÔºåËá™Â∑±‰∏çÊåÅÊúâÂØπË±°„ÄÇÂèØ‰ª•ÈÄöËøáretainÊñπÊ≥ï‰∏∫Ëá™Â∑±ÊâÄÊåÅÊúâ„ÄÇ 12id obj = [NSMutableArray array];// ÂèñÂæóÂØπË±°Ôºå‰ΩÜËá™Â∑±‰∏çÊåÅÊúâ[obj retain];// Ëá™Â∑±ÊåÅÊúâÂØπË±° ‰∏çÂÜçÈúÄË¶ÅËá™Â∑±ÊåÅÊúâÁöÑÂØπË±°Êó∂ÈáäÊîæ Ëá™Â∑±ÊåÅÊúâÁöÑÂØπË±°‰∏çÂÜçÈúÄË¶ÅÊó∂ÔºåÊåÅÊúâËÄÖÊúâ‰πâÂä°Â∞ÜÂÖ∂ÈáäÊîæ„ÄÇÈáäÊîæ‰ΩøÁî®releaseÊñπÊ≥ï„ÄÇ 12id obj = [[NSObject alloc] init];// Ëá™Â∑±ÁîüÊàêÂπ∂ÊåÅÊúâÂØπË±°[obj release];// ÈáäÊîæÂØπË±° Áî®retainÊñπÊ≥ïÊåÅÊúâÂØπË±°Ôºå‰∏ÄÊó¶‰∏çÂÜçÈúÄË¶ÅÔºåÂä°ÂøÖË¶ÅÁî®releaseÊñπÊ≥ïÈáäÊîæ„ÄÇ 123id obj = [NSMutableArray array];// ÂèñÂæóÂØπË±°Ôºå‰ΩÜËá™Â∑±‰∏çÊåÅÊúâ[obj retain];// ÊåÅÊúâÈùûËá™Â∑±ÁîüÊàêÂØπË±°[obj release];// ÈáäÊîæÂØπË±° Á±ª‰ºº[NSMutableArray array]ÊñπÊ≥ïÂèñÂæóÁöÑÂØπË±°Â≠òÂú®Ôºå‰ΩÜËá™Â∑±‰∏çÊåÅÊúâÂØπË±°ÔºåÂÜÖÈÉ®Â¶Ç‰ΩïÂÆûÁé∞Ôºü‰ª•objectËøô‰∏™ÊñπÊ≥ïÂêç‰∏∫‰æãÔºö 12345- (id)object &#123; id obj = [[NSObject alloc] init];// Ëá™Â∑±ÊåÅÊúâ [obj autorelease];// ÈÄÇÂΩìÊó∂Êú∫Ëá™Âä®ÈáäÊîæ return obj;// ÂèñÂæóÂØπË±°Â≠òÂú®Ôºå‰ΩÜËá™Â∑±‰∏çÊåÅÊúâ&#125; autoreleaseÊèê‰æõËøôÊ†∑ÁöÑÂäüËÉΩÔºå‰ΩøÂØπË±°Âú®Ë∂ÖÂá∫ÊåáÂÆöÁöÑÁîüÂ≠òËåÉÂõ¥Êó∂ËÉΩÂ§üËá™Âä®Âπ∂Ê≠£Á°ÆÂú∞ÈáäÊîæ„ÄÇ ‰ΩøÁî®NSMutableArrayÁ±ªÁöÑarrayÁ±ªÊñπÊ≥ïÁ≠âÂèØ‰ª•ÂèñÂæóË∞ÅÈÉΩ‰∏çÊåÅÊúâÁöÑÂØπË±°ÔºåËøô‰∫õÊñπÊ≥ïÊòØÈÄöËøáautoreleaseÂÆûÁé∞ÁöÑ„ÄÇ ÈùûËá™Â∑±ÊåÅÊúâÁöÑÂØπË±°Êó†Ê≥ïÈáäÊîæÁî®alloc/new/copy/mutableCopyÊñπÊ≥ïÁîüÊàêÂπ∂ÊåÅÊúâÁöÑÂØπË±°ÔºåÊàñÁî®retainÊñπÊ≥ïÊåÅÊúâÁöÑÂØπË±°ÔºåÂú®‰∏çÈúÄË¶ÅÊó∂Ë¶ÅÂ∞ÜÂÖ∂ÈáäÊîæ„ÄÇÂÄòËã•Âú®Â∫îÁî®Á®ãÂ∫è‰∏≠ÈáäÊîæ‰∫ÜÈùûËá™Â∑±ÊåÅÊúâÁöÑÂØπË±°‰ºöÈÄ†ÊàêÂ¥©Ê∫É„ÄÇ 123456id obj = [[NSObject alloc] init];// Ëá™Â∑±ÁîüÊàêÂπ∂ÊåÅÊúâÂØπË±°[obj release];// ÈáäÊîæÂØπË±°[obj release];// ÈáçÂ§çÈáäÊîæÂØπË±°ÔºåÂ¥©Ê∫Éid obj1 = [obj0 object];// ÂèñÂæóÂØπË±°Ôºå‰ΩÜËá™Â∑±‰∏çÊåÅÊúâ[obj1 release];// ÈáäÊîæÈùûËá™Â∑±ÊåÅÊúâÁöÑÂØπË±°ÔºåÂ¥©Ê∫É alloc/retain/release/deallocÂèäÂÖ∂ÂÆûÁé∞ CocoaÊòØmacOSÁöÑÁ≥ªÁªüÊ°ÜÊû∂ÔºåÂú®iOS‰∏äË¢´Áß∞‰∏∫Cocoa Touch„ÄÇCocoaÊ°ÜÊû∂ËôΩÁÑ∂Ê≤°ÊúâÂÖ¨ÂºÄÔºå‰ΩÜÊòØÂèØ‰ª•ÈÄöËøáCocoaÊ°ÜÊû∂ÁöÑ‰∫íÊç¢Ê°ÜÊû∂GNUstepÊù•Êé®ÊµãËãπÊûúÁöÑÂÆûÁé∞„ÄÇ allocË∞ÉÁî®allocWithZoneÔºåÈÇ£‰πàËøôÈáåÁöÑÂèÇÊï∞Á±ªÂûãNSZoneÊòØ‰ªÄ‰πàÔºü ÂÆÉÊòØ‰∏∫‰∫ÜÈò≤Ê≠¢ÂÜÖÂ≠òÁ¢éÁâáÂåñËÄåÂºïÂÖ•ÁöÑÁªìÊûÑ„ÄÇÂØπÂÜÖÂ≠òÂàÜÈÖçÁöÑÂå∫ÂüüÊú¨Ë∫´ËøõË°åÂ§öÈáçÂåñÁöÑÁÆ°ÁêÜÔºåÊ†πÊçÆ‰ΩøÁî®ÂØπË±°ÁöÑÁõÆÁöÑ„ÄÅÂØπË±°ÁöÑÂ§ßÂ∞èÂàÜÈÖçÂÜÖÂ≠òÔºå‰ªéËÄåÊèêÈ´òÂÜÖÂ≠òÁÆ°ÁêÜÁöÑÊïàÁéá„ÄÇ Áé∞Âú®ËøêË°åÊó∂Á≥ªÁªü‰∏≠ÁöÑÂÜÖÂ≠òÁÆ°ÁêÜÂ∑≤ÁªèÊûÅÂÖ∑ÊïàÁéáÔºå‰ΩøÁî®Âå∫ÂüüÊù•ÁÆ°ÁêÜÂÜÖÂ≠òÂèçËÄå‰ºöÂºïËµ∑ÂÜÖÂ≠ò‰ΩøÁî®ÊïàÁéá‰Ωé‰∏ã‰ª•ÂèäÊ∫ê‰ª£Á†ÅÂ§çÊùÇÁ≠âÈóÆÈ¢ò„ÄÇ GNUstepÁöÑÂÆûÁé∞GNUstepÊ∫êÁ†ÅÈáåallocÁ±ªÊñπÊ≥ïÁî®obj_layoutÁªìÊûÑ‰Ωì‰∏≠ÁöÑÊï¥Êï∞ÂèòÈáèretainedÊù•‰øùÂ≠òÂºïÁî®ËÆ°Êï∞retainCountÔºåÂπ∂Â∞ÜÂÖ∂ÂÜôÂÖ•ÂØπË±°ÂÜÖÂ≠òÂ§¥ÈÉ®„ÄÇ ÊâßË°åallocÂêéÂØπË±°ÁöÑÂÆû‰æãÊñπÊ≥ïretainCountËé∑ÂæóÊï∞ÂÄºÊòØ1Ôºåretain‰ΩøÂèòÈáèretainedÂÄº+1Ôºårelease‰ΩøÂèòÈáèretainedÂÄº-1„ÄÇrelease‰ΩøtetainedÂèòÈáèÂ§ß‰∫é0Êó∂-1ÔºåÁ≠â‰∫é0Êó∂Ë∞ÉÁî®deallocÂÆû‰æãÊñπÊ≥ïÔºåÂ∫üÂºÉÂØπË±°„ÄÇ ÂÖ∑‰ΩìÊÄªÁªìÂ¶Ç‰∏ãÔºö Âú®Objective-CÁöÑÂØπË±°‰∏≠Â≠òÊúâÂºïÁî®ËÆ°Êï∞Ëøô‰∏ÄÊï¥Êï∞ÂÄº„ÄÇ Ë∞ÉÁî®allocÊàñÊòØretainÊñπÊ≥ïÂêéÔºåÂºïÁî®ËÆ°Êï∞ÂÄº+1„ÄÇ Ë∞ÉÁî®releaseÂêéÔºåÂºïÁî®ËÆ°Êï∞ÂÄº-1„ÄÇ ÂºïÁî®ËÆ°Êï∞ÂÄº‰∏∫0Êó∂ÔºåË∞ÉÁî®deallocÊñπÊ≥ïÂ∫üÂºÉÂØπË±°„ÄÇ ËãπÊûúÁöÑÂÆûÁé∞allocËøáÁ®ãËÆæÁΩÆÊñ≠ÁÇπËøΩË∏™Ë∞ÉÁî®ÁöÑÊñπÊ≥ïÂíåÂáΩÊï∞Ôºö 1234+alloc+allocWithZone:class_createInstancecalloc//ÂàÜÈÖçÂÜÖÂ≠òÂùó ËãπÊûúÂØπallocÁöÑÂÆûÁé∞‰∏éGNUstepÂπ∂Êó†Â§öÂ§ßÂ∑ÆÂºÇ„ÄÇ retainCount/retain/releaseË∞ÉÁî®ÁöÑÊñπÊ≥ïÂíåÂáΩÊï∞ÂàÜÂà´Â¶Ç‰∏ãÔºö 1234567891011-retainCount__CFDoExternRefOperationCFBasicHashGetCountOfKey-retain__CFDoExternRefOperationCFBasicHashAddValue-release__CFDoExternRefOperationCFBasicHashRemoveValue ÔºàCEBasicHashRemoveValueËøîÂõû0Êó∂Ôºå-release Ë∞ÉÁî®deallocÔºâ ÂèØ‰ª•‰ªé__CFDoExternRefOperationÂáΩÊï∞‰ª•Âèä‰∏Ä‰∫õCFBasicHashÂºÄÂ§¥ÁöÑÂáΩÊï∞ÂêçÁúãÂá∫ÔºåËãπÊûúÁöÑÂÆûÁé∞Â§ßÊ¶ÇÂ∞±ÊòØÈááÁî®Êï£ÂàóË°®ÔºàÂèàÁß∞ÂìàÂ∏åË°®ÔºâÊù•ÁÆ°ÁêÜÂºïÁî®ËÆ°Êï∞„ÄÇ Âú®ÂºïÁî®ËÆ°Êï∞Ë°®‰∏≠Ôºåkey‰∏∫ÂÜÖÂ≠òÂùóÂú∞ÂùÄÔºåvalue‰∏∫ÂØπÂ∫îÁöÑÂºïÁî®ËÆ°Êï∞ÔºåËãπÊûúËøôÊ†∑ÂÆûÁé∞ÁöÑ‰ºòÂäøÂú®‰∫éÔºö ‰∏∫ÂØπË±°ÂàÜÈÖçÂÜÖÂ≠òÂùóÊó∂Êó†ÈúÄËÄÉËôëÂÜÖÂ≠òÂùóÂ§¥ÈÉ®„ÄÇ ÂØπË±°Âç†Áî®ÂÜÖÂ≠òÂùóÊçüÂùèÊó∂ÔºåÂèØ‰ª•Ê†πÊçÆÂºïÁî®ËÆ°Êï∞Ë°®Êù•Á°ÆËÆ§ÂÜÖÂ≠òÂùóÁöÑ‰ΩçÁΩÆ„ÄÇ Ê£ÄÊµãÂÜÖÂ≠òÊ≥ÑÈú≤Êó∂ÔºåÊ†πÊçÆÂºïÁî®ËÆ°Êï∞Ë°®‰∏≠ÁöÑËÆ∞ÂΩïÊ£ÄÊü•ÂØπË±°ÁöÑÊåÅÊúâËÄÖÊòØÂê¶Â≠òÂú®„ÄÇ autoreleaseÂèäÂÖ∂ÂÆûÁé∞autorelease‰ºöÂÉèCËØ≠Ë®ÄÁöÑËá™Âä®ÂèòÈáèÈÇ£Ê†∑ÂØπÂæÖÂØπË±°ÂÆû‰æã„ÄÇÂΩìË∂ÖÂá∫ÂÖ∂‰ΩúÁî®ÂüüÊó∂ÔºåÂØπË±°ÂÆû‰æãÁöÑreleaseÂÆû‰æãÊñπÊ≥ïË¢´Ë∞ÉÁî®„ÄÇ autoreleaseÂÖ∑‰Ωì‰ΩøÁî®ÊñπÊ≥ïÂ¶Ç‰∏ã: 1.ÁîüÊàêÂπ∂ÊåÅÊúâNSAutoreleasePoolÂØπË±°Ôºõ 2.Ë∞ÉÁî®Â∑≤ÂàÜÈÖçÂØπË±°ÁöÑautoreleaseÂÆû‰æãÊñπÊ≥ïÔºõ 3.Â∫üÂºÉNSAutoreleasePoolÂØπË±°„ÄÇ 1234NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];id obj = [[NSObject alloc] init];[obj release];[pool drain]; CocoaÊ°ÜÊû∂‰∏≠Á®ãÂ∫è‰∏ªÂæ™ÁéØÁöÑNSRunLoopÂØπNSAutoreleasePoolÂØπË±°ËøõË°åÁîüÊàê„ÄÅÊåÅÊúâÂíåÂ∫üÂºÉÂ§ÑÁêÜ„ÄÇÂú®Â§ßÈáè‰∫ßÁîüautoreleaseÂØπË±°Êó∂ÔºåËã•‰∏çÂ∫üÂºÉNSAutoreleasePoolÂØπË±°ÔºåÈÇ£‰πàÁîüÊàêÁöÑÂØπË±°Â∞±‰∏çËÉΩË¢´Â∫üÂºÉÔºå‰ºö‰∫ßÁîüÂÜÖÂ≠ò‰∏çË∂≥Áé∞Ë±°„ÄÇ GNUstepÁöÑÂÆûÁé∞autoreleaseÂÆû‰æãÊñπÊ≥ïÁöÑÊú¨Ë¥®Â∞±ÊòØË∞ÉÁî®NSAutoreleasePoolÂØπË±°ÁöÑaddObjectÁ±ªÊñπÊ≥ï„ÄÇ 1[obj autorelease]; Ê∫êÁ†ÅÔºö 123- (id)autorelease &#123; [NSAutoreleasePool addObject:self];&#125; GNUstepÂú®ÂÆûÁé∞NSAutoreleasePoolÊó∂‰ΩøÁî®ËøûÊé•ÂàóË°®ÔºåÂèØ‰ª•ÁêÜËß£‰∏∫Êï∞ÁªÑ„ÄÇËã•Ë∞ÉÁî®NSObjectÁ±ªÁöÑautoreleaseÊñπÊ≥ïÔºåËØ•ÂØπË±°Â∞±‰ºöË¢´ËøΩÂä†Âà∞Ê≠£Âú®‰ΩøÁî®ÁöÑNSAutoreleasePoolÂØπË±°ÁöÑÊï∞ÁªÑ‰∏≠„ÄÇdrainÂÆû‰æãÊñπÊ≥ïÂ∫üÂºÉÊ≠£Âú®‰ΩøÁî®ÁöÑNSAutoreleasePoolÂØπË±°Ôºå‰ºöÂØπÊï∞ÁªÑ‰∏≠ÁöÑÊâÄÊúâÂØπË±°Ë∞ÉÁî®releaseÊñπÊ≥ï„ÄÇ ËãπÊûúÁöÑÂÆûÁé∞autoreleasepool‰ª•Êï∞ÁªÑÁöÑÂΩ¢ÂºèÂÆûÁé∞Ôºå‰∏ªË¶ÅÈÄöËøá‰ª•‰∏ã3‰∏™ÂáΩÊï∞Ôºö obj_autoreleasePoolPush() obj_autorelease(obj) obj_autoreleasePoolPop(pool) 12345678910NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];/* Á≠âÂêå‰∫éobjc_autoreleasePoolPush */ id obj = [[NSObject alloc] init]; [obj autorelease];/* Á≠âÂêå‰∫é objc_autorelease(obj) */ [pool drain];/* Á≠âÂêå‰∫é objc_autoreleasePoolPop(pool) */ ARCARCÊ¶ÇËø∞ARCÔºàAuto Reference CountingÔºâÊòØiOS5„ÄÅmacOS10.7ÔºàOS X LionÔºâÂºïÂÖ•ÁöÑÂÜÖÂ≠òÁÆ°ÁêÜÊäÄÊúØ„ÄÇ ARCÁöÑÂá∫Áé∞Ëß£ÂÜ≥‰∫ÜÂéüÊù•ÈúÄË¶ÅÊâãÂä®ÈîÆÂÖ•retainÊàñreleaseÊìç‰ΩúÁöÑÈóÆÈ¢ò„ÄÇËøôÂú®Èôç‰ΩéÁ®ãÂ∫èÂ¥©Ê∫É„ÄÅÂÜÖÂ≠òÈ£éÈô©ÁöÑÂêåÊó∂ÔºåÂæàÂ§ßÁ®ãÂ∫¶‰∏äÂáèÂ∞ë‰∫ÜÂºÄÂèëÁ®ãÂ∫èÁöÑÂ∑•‰ΩúÈáè„ÄÇ ÂÜÖÂ≠òÁÆ°ÁêÜÁöÑÊÄùËÄÉÊñπÂºè ‚ÄúÂºïÁî®ËÆ°Êï∞ÂºèÂÜÖÂ≠òÁÆ°ÁêÜ‚ÄùÁöÑÊú¨Ë¥®Âú®ARC‰∏≠Âπ∂Ê≤°ÊúâÊîπÂèòÔºåARCÂè™ÊòØËá™Âä®Âú∞Â∏ÆÊàë‰ª¨Â§ÑÁêÜ‚ÄúÂºïÁî®ËÆ°Êï∞‚ÄùÁöÑÁõ∏ÂÖ≥ÈÉ®ÂàÜ„ÄÇ ÊâÄÊúâÊùÉ‰øÆÈ•∞Á¨¶ ARCÁéØÂ¢É‰∏ãÂÖ∂Á±ªÂûãÂøÖÈ°ªÈôÑÂä†ÊâÄÊúâÊùÉ‰øÆÈ•∞Á¨¶ÔºàÊúâÁúÅÁï•ÁöÑÊÉÖÂÜµÔºâÔºåÊâÄÊúâÊùÉ‰øÆÈ•∞Á¨¶Êúâ‰ª•‰∏ã4ÁßçÔºö __strong __weak __unsafe_unretained __autorelease ‰π¶‰∏≠Ê≠§Â§ÑÊèêÂà∞idÁ±ªÂûãÂÅö‰∏Ä‰∏ãËÆ∞ÂΩïÔºö Objective-C‰∏≠‰∏∫‰∫ÜÂ§ÑÁêÜÂØπË±°ÔºåÂèØÂ∞ÜÂèòÈáèÂÆö‰πâ‰∏∫idÁ±ªÂûãÔºåidÁ±ªÂûãÁî®‰∫éÈöêËóèÂØπË±°Á±ªÂûãÁöÑÁ±ªÂêçÈÉ®ÂàÜÔºåÁõ∏ÂΩì‰∫éCËØ≠Ë®Ä‰∏≠Â∏∏Áî®Âà∞ÁöÑvoid *„ÄÇ __strong‰øÆÈ•∞Á¨¶idÂíåÂØπË±°Á±ªÂûãÈªòËÆ§‰ΩøÁî®__strong‰øÆÈ•∞ÔºåÁî±‰∫éÊòØÈªòËÆ§ÊÉÖÂÜµÔºåÂèØÁúÅÁï•‰∏çÂÜô„ÄÇ __strongË°®Á§∫ÂØπÂØπË±°ÁöÑÂº∫ÂºïÁî®„ÄÇÊåÅÊúâÂº∫ÂºïÁî®ÁöÑÂèòÈáèÂú®Ë∂ÖÂá∫ÂÖ∂‰ΩúÁî®ÂüüÊó∂Ë¢´Â∫üÂºÉ„ÄÇ strongÂêåweak„ÄÅ__autoreleasing‰∏ÄÊ†∑ÔºåÂèØ‰ª•‰øùËØÅË¢´‰øÆÈ•∞ÁöÑÂèòÈáèÂú®ÂàùÂßãÂåñÊó∂‰∏∫nil„ÄÇ 1234id obj = [[NSObject alloc] init]; //Á≠âÂêå‰∫é//id __strong obj = [[NSObject alloc] init]; __weak‰øÆÈ•∞Á¨¶Âæ™ÁéØÂºïÁî®ÂÆπÊòìÂºïËµ∑ÂÜÖÂ≠òÊ≥ÑÊºè„ÄÇÊâÄË∞ìÂÜÖÂ≠òÊ≥ÑÊºèÂ∞±ÊòØÂ∫îÂΩìÂ∫üÂºÉÁöÑÂØπË±°Âú®Ë∂ÖÂá∫ÂÖ∂ÁîüÂ≠òÂë®ÊúüÂêéÁªßÁª≠Â≠òÂú®„ÄÇ‰ΩøÁî®__weak‰øÆÈ•∞Á¨¶ÂèØ‰ª•ÈÅøÂÖçÂæ™ÁéØÂºïÁî®„ÄÇ __weakË°®Á§∫Âº±ÂºïÁî®ÔºåÂº±ÂºïÁî®‰∏çËÉΩÊåÅÊúâÂØπË±°ÂÆû‰æã„ÄÇ 1id __weak obj = [[NSObject alloc] init];//ÁºñËØëÂô®‰ºöË≠¶Âëä __weak‰øÆÈ•∞Á¨¶ËøòÊúâÂè¶‰∏Ä‰∏™‰ºòÁÇπ„ÄÇÂú®ÊåÅÊúâÂØπË±°ÁöÑÂº±ÂºïÁî®Êó∂ÔºåËã•ÂØπË±°Ë¢´Â∫üÂºÉÔºåÂàôÊ≠§Âº±ÂºïÁî®Â∞ÜÂ§±Êïà‰∏îÂ§Ñ‰∫énilË¢´ËµãÂÄºÁöÑÁä∂ÊÄÅ„ÄÇ ÈÄöËøáÊ£ÄÊü•__weak‰øÆÈ•∞ÁöÑÂèòÈáèÊòØÂê¶‰∏∫nilÂèØ‰ª•Âà§Êñ≠Ë¢´ËµãÂÄºÁöÑÂØπË±°ÊòØÂê¶Â∑≤Â∫üÂºÉ„ÄÇ weakÂè™ËÉΩÁî®‰∫éiOS5ÂíåmacOS10.7‰ª•‰∏äÁâàÊú¨ÔºåÂú®iOS4ÂíåmacOS10.6Âèä‰ª•ÂâçÁî®unsafe_unretained‰ª£Êõø„ÄÇ __autoreleasing‰øÆÈ•∞Á¨¶ARC‰∏ãÊåáÂÆö@autoreleasepoolÂùóÊù•Êõø‰ª£NSAutoreleasePoolÁ±ªÁîüÊàê„ÄÅÊåÅÊúâÂèäÂ∫üÂºÉËøô‰∏ÄËåÉÂõ¥„ÄÇ_autoreleasing‰øÆÈ•∞ÂèòÈáèÁ≠â‰ª∑‰∫éÂØπË±°Ë∞ÉÁî®autoreleaseÊñπÊ≥ïÔºåÂç≥ÂèØÂ∞ÜÂØπË±°Ê≥®ÂÜåÂà∞autoreleasepool‰∏≠„ÄÇ 123@autoreleasepool &#123; id __autoreleasing obj = [[NSObject alloc] init];&#125; ÊèêÈóÆÔºöÂâçÊñáÊèêÂà∞__weak‰øÆÈ•∞ÁöÑÂèòÈáèÂøÖÈ°ªÊ≥®ÂÜåÂà∞autoreleasepool‰∏≠Ôºå‰∏∫‰ªÄ‰πàÔºü Á≠îÔºöÂõ†‰∏∫__weak‰øÆÈ•∞ÁöÑÂèòÈáèÂè™ËÉΩÊåÅÊúâÂØπË±°ÁöÑÂº±ÂºïÁî®ÔºåÂú®ËÆøÈóÆÂØπË±°ÁöÑËøáÁ®ã‰∏≠ÔºåËØ•ÂØπË±°ÂèØËÉΩË¢´Â∫üÂºÉ„ÄÇÂ¶ÇÊûúÊääË¶ÅËÆøÈóÆÁöÑÂØπË±°Ê≥®ÂÜåÂà∞autoreleasepool‰∏≠ÔºåÈÇ£‰πàÂú®@autoreleasepoolÂùóÁªìÊùü‰πãÂâçËÉΩÁ°Æ‰øùËØ•ÂØπË±°Â≠òÂú®„ÄÇ _autoreleasingÂêå__strong‰∏ÄÊ†∑ÔºåÊòæÂºè‰ΩøÁî®ÁΩïËßÅ„ÄÇ ARCÁöÑËßÑÂàôARCÁéØÂ¢É‰∏ãÁºñËØëÊ∫ê‰ª£Á†ÅÈÅµÂæ™‰∏ÄÂÆöËßÑÂàôÔºö ‰∏çËÉΩ‰ΩøÁî®retain/release/retainCount/autorelease ‰∏çËÉΩ‰ΩøÁî®NSAllocateObject/NSDeallocateObject ARCÊúâÊïàÊó∂Ôºå‰ª•‰∏äÊñπÊ≥ï‰ºöÂØºËá¥ÁºñËØëÂô®Êä•Èîô„ÄÇ ÂøÖÈ°ªÈÅµÂÆàÂÜÖÂ≠òÁÆ°ÁêÜÁöÑÊñπÊ≥ïÂëΩÂêçËßÑÂàô ÂØπË±°ÁöÑÁîüÊàê„ÄÅÊåÅÊúâÁöÑÊñπÊ≥ïÂøÖÈ°ªÈÅµÂæ™ÂëΩÂêçËßÑÂàôÔºöalloc/new/copy/mutableCopy„ÄÇ‰ª•initÂºÄÂ§¥ÁöÑÊñπÊ≥ïÊõ¥‰∏•Ê†ºÔºöÂøÖÈ°ªÊòØÂÆû‰æãÊñπÊ≥ï‰∏îÂøÖÈ°ªËøîÂõûÂØπË±°ÔºåËøîÂõûÂØπË±°ÁöÑÁ±ªÂûãÂøÖÈ°ªÊòØidÁ±ªÂûãÊàñËØ•ÊñπÊ≥ïÂ£∞ÊòéÁ±ªÁöÑÂØπË±°Á±ªÂûã„ÄÇ ‰∏çË¶ÅÊòæÂºèË∞ÉÁî®dealloc deallocÊñπÊ≥ïÊó†ÈúÄÊòæÂºèË∞ÉÁî®Ôºå‰ΩÜCËØ≠Ë®ÄÂ∫ìÈúÄË¶ÅÂú®dealloc‰∏≠freeÔºå‰ª•ÂèäÂà†Èô§Â∑≤Ê≥®ÂÜåÁöÑÈÄöÁü•ËßÇÂØüËÄÖ„ÄÇ ‰ΩøÁî®@autoreleaseÂùó‰ª£ÊõøNSAutoreleasePool ARCÊúâÊïàÊó∂Ôºå‰ΩøÁî®@autoreleasepoolÂùó‰ª£ÊõøNSAutoreleasePool„ÄÇ ‰∏çËÉΩ‰ΩøÁî®Âå∫ÂüüÔºàNSZoneÔºâ ‰∏çÁÆ°ARCÊòØÂê¶ÊúâÊïàÔºåÂå∫ÂüüÂú®Áé∞Âú®ËøêË°åÊó∂Á≥ªÁªü‰∏≠Â∑≤ÂçïÁ∫ØÂú∞Ë¢´ÂøΩÁï•„ÄÇ CËØ≠Ë®ÄÁöÑËßÑÁ∫¶‰∏äÊ≤°ÊúâÊñπÊ≥ïÊù•ÁÆ°ÁêÜÁªìÊûÑ‰ΩìÊàêÂëòÂèòÈáèÁöÑÁîüÂ≠òÂë®Êúü„ÄÇ ÂØπË±°ÂûãÂèòÈáè‰∏çËÉΩ‰Ωú‰∏∫CËØ≠Ë®ÄÁªìÊûÑ‰ΩìÔºàstruct/unionÔºâÁöÑÊàêÂëò ÊòæÂºèËΩ¨Êç¢‚Äúid‚ÄùÂíå‚Äúvoid *‚Äù 123/* ARCÊó†Êïà */id obj = [[NSObject alloc] init];void *p = obj ARCÊúâÊïàÊó∂ÈúÄË¶ÅÈÄöËøá__bridgeÊù•ÊòæÂºèËΩ¨Êç¢Ôºö 1234/* ARCÊúâÊïà */id obj = [[NSObject alloc] init];void *p = (__bridge void*)obj;id o = (__bridge id)p; Â±ûÊÄßÂíåÊï∞ÁªÑ Â£∞ÊòéÂ±ûÊÄßÊâÄÁî®ÁöÑÂÖ≥ÈîÆËØç‰∏éÊâÄÊúâÊùÉ‰øÆÈ•∞Á¨¶ÁöÑÂØπÂ∫îÂÖ≥Á≥ªÔºö Â£∞ÊòéÂ±ûÊÄßÁöÑÂÖ≥ÈîÆËØçÊâÄÊúâÊùÉ‰øÆÈ•∞Á¨¶ assign unsafe_unretained copy strong retain strong strong strong unsafe_unretained unsafe_unretained weak weak Âä®ÊÄÅÊï∞ÁªÑ‰∏≠Êìç‰Ωú__strong‰øÆÈ•∞ÁöÑÂèòÈáè‰∏éÈùôÊÄÅÊï∞ÁªÑÊúâÂæàÂ§ßÂ∑ÆÂºÇÔºåÈúÄË¶ÅËá™Â∑±ÈáäÊîæÊâÄÊúâÂÖÉÁ¥†„ÄÇÈùôÊÄÅÊï∞ÁªÑ‰∏≠ÔºåÁºñËØëÂô®ËÉΩÂ§üÊ†πÊçÆÂèòÈáèÁöÑ‰ΩúÁî®ÂüüËá™Âä®ÊèíÂÖ•ÈáäÊîæËµãÂÄºÂØπË±°ÁöÑ‰ª£Á†ÅÔºåËÄåÂú®Âä®ÊÄÅÊï∞ÁªÑ‰∏≠ÔºåÁºñËØëÂô®‰∏çËÉΩÁ°ÆÂÆöÊï∞ÁªÑÁöÑÁîüÂ≠òÂë®ÊúüÔºåÊâÄ‰ª•Êó†‰ªéÂ§ÑÁêÜ„ÄÇ ARCÁöÑÂÆûÁé∞__strongÁöÑÂÆûÁé∞ Ëá™Â∑±ÁîüÊàêÂπ∂ÊåÅÊúâ 12345678&#123; id __strong obj = [[NSObject alloc] init];&#125;/* ÁºñËØëÂô®ÁöÑÊ®°Êãü‰ª£Á†Å */id obj = objc_msgSend(NSObject, @selector(alloc));objc_msgSend(obj, @selector(init));objc_release(obj); ÈùûËá™Â∑±ÁîüÊàêÊåÅÊúâ 123456id __strong obj = [NSMutableArray array];/* ÁºñËØëÂô®ÁöÑÊ®°Êãü‰ª£Á†Å */id obj = objc_msgSend(NSMutableArray, @selector(array));objc_retainAutoreleasedReturnValue(obj);objc_release(obj); objc_retainAutoreleasedReturnValueÂáΩÊï∞Áî®‰∫éÊåÅÊúâÂØπË±°ÔºåÊ≥®ÂÜåÂà∞autoreleasepool‰∏≠Âπ∂ËøîÂõû„ÄÇ‰∏é‰πãÂØπÂ∫îÁöÑÂáΩÊï∞ÊòØobjc_autoreleaseReturnValue„ÄÇ 12345678910+ (id)array &#123; return [[NSMutableArray alloc] init];&#125;/* ÁºñËØëÂô®ÁöÑÊ®°Êãü‰ª£Á†Å */+ (id)array &#123; id obj = objc_msgSend(NSMutableArray, @selector(alloc)); objc_msgSend(obj, @selector(init)); return objc_autoreleaseReturnValue(obj);&#125; ÈÄöËøáobjc_retainAutoreleasedReturnValueÂáΩÊï∞Âíåobjc_autoreleaseReturnValueÂáΩÊï∞ÁöÑÂçè‰ΩúÔºåÂèØ‰ª•‰∏çÂ∞ÜÂØπË±°Ê≥®ÂÜåÂà∞autoreleasepool‰∏≠ËÄåÁõ¥Êé•‰º†ÈÄíÔºå‰ª•ËææÂà∞ÊúÄ‰ºòÂåñÁ®ãÂ∫èËøêË°å„ÄÇ __weakÁöÑÂÆûÁé∞ ‰ΩøÁî®__weak‰øÆÈ•∞ÁöÑÂèòÈáèÔºåÂ∞±ÊòØ‰ΩøÁî®Ê≥®ÂÜåÂà∞autoreleasepool‰∏≠ÁöÑÂØπË±°„ÄÇ 12345678910&#123; id __weak obj1 = obj;&#125;/* ÁºñËØëÂô®Ê®°Êãü‰ª£Á†Å */id obj1;objc_initWeak(&amp;obj1, obj);id tmp = objc_loadWeakRetained(&amp;obj1);objc_autorelease(tmp);objc_destroyWeak(obj1); __weakÂêåÂºïÁî®ËÆ°Êï∞‰∏ÄÊ†∑ÈÄöËøáÊï£ÂàóË°®ÔºàÂìàÂ∏åË°®ÔºâÂÆûÁé∞ÔºåÂ§ßËá¥ÊµÅÁ®ãÂ¶Ç‰∏ãÔºö 1.objc_initWeak(&amp;obj1, obj)ÂáΩÊï∞ÂàùÂßãÂåñ__weak‰øÆÈ•∞ÁöÑÂèòÈáèÔºåÈÄöËøáÊâßË°åobjc_storeWeak(&amp;obj1, obj)ÂáΩÊï∞Ôºå‰ª•Á¨¨‰∏Ä‰∏™ÂèÇÊï∞ÔºàÂèòÈáèÁöÑÂú∞ÂùÄÔºâ‰Ωú‰∏∫keyÔºåÊääÁ¨¨‰∫å‰∏™ÂèÇÊï∞ÔºàËµãÂÄºÂØπË±°Ôºâ‰Ωú‰∏∫valueÂ≠òÂÖ•ÂìàÂ∏åË°®„ÄÇ 2.Áî±‰∫éÂº±ÂºïÁî®‰∏çËÉΩÊåÅÊúâÂØπË±°ÔºåÂáΩÊï∞objc_loadWeakRetained(&amp;obj1)ÂèñÂá∫ÊâÄÂºïÁî®ÁöÑÂØπË±°Âπ∂retain„ÄÇ 3.objc_autorelease(tmp)ÂáΩÊï∞Â∞ÜÂØπË±°Ê≥®ÂÜåÂà∞autoreleasepool‰∏≠„ÄÇ 4.objc_destroyWeak(&amp;obj1)ÂáΩÊï∞ÈáäÊîæweak‰øÆÈ•∞ÁöÑÂèòÈáèÔºåÈÄöËøáËøáÁ®ãÊâßË°åobjc_store(&amp;obj1, 0)ÂáΩÊï∞ÔºåÂú®weakË°®‰∏≠Êü•Âà∞ÂèòÈáèÂú∞ÂùÄÂπ∂Âà†Èô§„ÄÇÂ∫üÂºÉÂØπË±°Ë∞ÉÁî®objc_clear_deallocatingÂáΩÊï∞ÔºåËøô‰∏™ËøáÁ®ã‰ºöÂ∞ÜweakË°®ËÆ∞ÂΩï‰∏≠weak‰øÆÈ•∞ÁöÑÂèòÈáèÂú∞ÂùÄËµãÂÄº‰∏∫nil„ÄÇ Â¶ÇÊûúÂ§ßÈáè‰ΩøÁî®weak‰øÆÈ•∞ÁöÑÂèòÈáèÔºåÂàô‰ºöÊ∂àËÄóÁõ∏Â∫îÁöÑCPUËµÑÊ∫ê„ÄÇËâØÁ≠ñÊòØÂè™Âú®ÈúÄË¶ÅÈÅøÂÖçÂæ™ÁéØÂºïÁî®Êó∂‰ΩøÁî®weak‰øÆÈ•∞Á¨¶„ÄÇ __autoreleasingÁöÑÂÆûÁé∞ 12345678910@autoreleasepool &#123; id __autoreleasing obj = [[NSObject alloc] init];&#125;/* ÁºñËØëÂô®ÁöÑÊ®°Êãü‰ª£Á†Å */id pool = objc_autoreleasePoolPush();id obj = objc_msgSend(NSObject, @selector(alloc));objc_msgSend(obj, @selector(init));objc_autorelese(obj);objc_autoreleasePoolPop(); ‰ª•‰∏ä‰∏∫ARCÁØáÁöÑÂ≠¶‰π†ÂÜÖÂÆπ„ÄÇ]]></content>
      <categories>
        <category>learn</category>
      </categories>
      <tags>
        <tag>ARC</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS‰πãÂÜÖÂ≠òÁÆ°ÁêÜ]]></title>
    <url>%2F2018%2F11%2F06%2FiOS%E4%B9%8B%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%2F</url>
    <content type="text"><![CDATA[iOS‰πãÂÜÖÂ≠òÁÆ°ÁêÜ #Êú¨ÁØáÁöÑ‰∏ªÈ¢òÊòØiOS‰∏≠ÁöÑ ‚ÄúÂÜÖÂ≠òÁÆ°ÁêÜÊú∫Âà∂‚Äù„ÄÇËØ¥Âà∞ÂÜÖÂ≠òÁÆ°ÁêÜÊú∫Âà∂ÔºåÈÄÉ‰∏çËøáiOSÁöÑ‰∏§ÁßçÂÜÖÂ≠òÁÆ°ÁêÜÊú∫Âà∂ÔºöMRC Âíå ARC„ÄÇ ÂÖàÁÆÄÂçï‰ªãÁªç‰∏Ä‰∏ãÔºöMRCÔºàmanual reference countingÔºâÔºö‚ÄúÊâãÂä®ÂºïÁî®ËÆ°Êï∞‚Äù ÔºåÁî±ÂºÄÂèëËÄÖÁÆ°ÁêÜÂÜÖÂ≠ò„ÄÇARCÔºàautomatic reference countingÔºâÔºö‚ÄúËá™Âä®ÂºïÁî®ËÆ°Êï∞‚ÄùÔºå‰ªéiOS 5ÂºÄÂßãÊîØÊåÅÔºåÁî±ÁºñËØëÂô®Â∏ÆÂøôÁÆ°ÁêÜÂÜÖÂ≠ò„ÄÇ ËãπÊûúÂºïÂÖ•ARCÊú∫Âà∂ÁöÑÂéüÂõ†ÁåúÊµãÔºöiOS4‰πãÂâçÔºåÊâÄÊúâiOSÂºÄÂèëËÄÖÂøÖÈ°ªÊâãÂä®ÁÆ°ÁêÜÂÜÖÂ≠òÔºåÂç≥ÊâãÂä®ÁÆ°ÁêÜÂØπË±°ÁöÑÂÜÖÂ≠òÂàÜÈÖçÂíåÈáäÊîæ„ÄÇÈ¶ñÂÖàÔºå‰∏çÊñ≠ÊèíÂÖ•retain„ÄÅreleaseÁ≠âÂÜÖÂ≠òÁÆ°ÁêÜËØ≠Âè•ÔºåÂ§ßÂ§ßÂä†Â§ß‰∫ÜÂ∑•‰ΩúÈáèÂíå‰ª£Á†ÅÈáè„ÄÇÂÖ∂Ê¨°ÔºåÂú®Èù¢ÂØπ‰∏Ä‰∫õÂ§öÁ∫øÁ®ãÂπ∂ÂèëÊìç‰ΩúÊó∂ÔºåÂºÄÂèëËÄÖÊâãÂä®ÁÆ°ÁêÜÂÜÖÂ≠òÂπ∂‰∏çÁÆÄÂçïÔºåËøòÂèØËÉΩ‰ºöÂ∏¶Êù•ÂæàÂ§öÊó†Ê≥ïÈ¢ÑÁü•ÁöÑÈóÆÈ¢ò„ÄÇÊâÄ‰ª•ÔºåËãπÊûú‰ªéiOS5ÂºÄÂßãÂºïËøõARCÊú∫Âà∂ÔºåÁî±ÁºñËØëÂô®Â∏ÆÂøôÁÆ°ÁêÜÂÜÖÂ≠ò„ÄÇÂú®ÁºñËØëÊúüÔºåÁºñËØëÂô®‰ºöËá™Âä®Âä†‰∏äÂÜÖÂ≠òÁÆ°ÁêÜËØ≠Âè•„ÄÇËøôÊ†∑ÔºåÂºÄÂèëËÄÖÂèØ‰ª•Êõ¥Âä†ÂÖ≥Ê≥®‰∏öÂä°ÈÄªËæë„ÄÇ ##‰∏ãÈù¢ËøõÂÖ•Ê≠£È¢òÔºöÂÜÖÂ≠òÁÆ°ÁêÜ„ÄÇ ‰∏Ä„ÄÅÁêÜËß£ÂºïÁî®ËÆ°Êï∞ÂºïÁî®ËÆ°Êï∞Â∑•‰ΩúÂéüÁêÜÔºö ËøôËæπÂºïÁî®ÊàëÊ≠£Âú®ÁúãÁöÑ„ÄäObject-C È´òÁ∫ßÁºñÁ®ã iOS‰∏éOSXÂ§öÁ∫øÁ®ãÂíåÂÜÖÂ≠òÁÆ°ÁêÜ„ÄãËøôÊú¨‰π¶ÁöÑ‰æãÂ≠êÔºö ÁªèÂÖ∏‰æãÂ≠êÔºö Ëß£ÈáäÔºö1„ÄÅÂºÄÁÅØÔºöÂºïÁî≥Ôºö‚Äú ÂàõÂª∫ÂØπË±° ‚Äù„ÄÇ2„ÄÅÂÖ≥ÁÅØÔºöÂºïÁî≥Ôºö‚Äú ÂàõÂª∫ÂØπË±° ‚Äù„ÄÇ Ëß£ÈáäÔºö1„ÄÅÊúâ‰∫∫Êù•‰∏äÁè≠ÊâìÂç°ÔºöÂºÄÁÅØ„ÄÇ‚Äì ÔºàÂàõÂª∫ÂØπË±°ÔºåËÆ°Êï∞‰∏∫1Ôºâ2„ÄÅÂèàÊúâ‰∫∫Êù•Ôºö‰øùÊåÅÂºÄÁÅØ„ÄÇ‚ÄìÔºà‰øùÊåÅÂØπË±°ÔºåËÆ°Êï∞‰∏∫2Ôºâ3„ÄÅÂèàÊúâ‰∫∫Êù•Ôºö‰øùÊåÅÂºÄÁÅØ„ÄÇ‚ÄìÔºà‰øùÊåÅÂØπË±°ÔºåËÆ°Êï∞‰∏∫3Ôºâ4„ÄÅÊúâ‰∫∫‰∏ãÁè≠‰∫ÜÔºö‰øùÊåÅÂºÄÁÅØ„ÄÇ‚ÄìÔºà‰øùÊåÅÂØπË±°ÔºåËÆ°Êï∞‰∏∫2Ôºâ5„ÄÅÂèàÊúâ‰∫∫‰∏ãÁè≠‰∫ÜÔºö‰øùÊåÅÂºÄÁÅØ„ÄÇ‚ÄìÔºà‰øùÊåÅÂØπË±°ÔºåËÆ°Êï∞‰∏∫1Ôºâ6„ÄÅÊâÄÊúâ‰∫∫ÈÉΩ‰∏ãÁè≠‰∫ÜÔºöÂÖ≥ÁÅØ„ÄÇ‚ÄìÔºàÈîÄÊØÅÂØπË±°ÔºåËÆ°Êï∞‰∏∫0Ôºâ Â¶ÇÊûúËßâÂæóÊú¨‰π¶‰∏≠ÁöÑ‰æãÂ≠êËØ¥ÁöÑÊúâÁÇπÊäΩË±°ÈöæÊáÇÔºåÊ≤°ÂÖ≥Á≥ªÔºåËØ∑Áúã‰∏ãÈù¢ÂõæËß£Á§∫‰æãÔºöÊèêÁ§∫ÔºöÂÆûÁÆ≠Â§¥‰∏∫Âº∫ÂºïÁî®ÔºåËôöÁÆ≠Â§¥‰∏∫Âº±ÂºïÁî® Â±ûÊÄßÂ≠òÂèñÊñπÊ≥ïÁöÑÂÜÖÂ≠òÁÆ°ÁêÜ ËøôËæπ‰∏æ‰∏Ä‰∏™setÊñπÊ≥ïÁöÑ‰æãÂ≠êÔºö Ëß£ÈáäÔºöobject‰∏≠ÂæóÂà∞Êñ∞ÂÄºÔºå_objectÂ≠òÂÇ®ÁùÄÊóßÂÄº„ÄÇËÄåsetÊñπÊ≥ïÂ∞Ü‰øùÁïôÊñ∞ÂÄºÔºåÈáäÊîæÊóßÂÄºÔºåÁÑ∂ÂêéÊõ¥Êñ∞ÂÆû‰æãÂèòÈáè„ÄÇËøô‰∏â‰∏™ËØ≠Âè•ÁöÑÈ°∫Â∫èÂæàÈáçË¶Å„ÄÇ Â¶ÇÊûúÂÖàreleaseÂÜçretain„ÄÇÈÇ£‰πàËØ•ÂØπË±°ÂèØËÉΩÂ∑≤ÁªèË¢´ÂõûÊî∂ÔºåÊ≠§Êó∂retainÊìç‰ΩúÊó†ÊïàÔºåÂõ†‰∏∫ÂØπË±°Â∑≤ÈáäÊîæ„ÄÇËøôÊó∂ÂÆû‰æãÂèòÈáèÂ∞±ÂèòÊàê‰∫ÜÊÇ¨ÊåÇÊåáÈíà„ÄÇÊÇ¨ÊåÇÊåáÈíàÔºöÊåáÈíàÊåánilÁöÑÊåáÈíà„ÄÇ Ëá™Âä®ÈáäÊîæÊ±† Âú®Êàë‰ª¨ÂÜôiOSÁ®ãÂ∫èÊó∂ÔºåmainÂáΩÊï∞ÈáåÂ∞±Êúâ‰∏Ä‰∏™autoreleasepoolÔºàËá™Âä®ÈáäÊîæÊ±†Ôºâ„ÄÇ autoreleaseËÉΩÂª∂ÈïøÂØπË±°ÁöÑÁîüÂëΩÂë®ÊúüÔºåÂú®ÂØπË±°Ë∑®Ë∂ä‚ÄúÊñπÊ≥ïË∞ÉÁî®ËæπÁïå‚ÄùÂêéÔºàÂ∞±ÊòØ}ÂêéÔºâ‰æùÁÑ∂ÂèØ‰ª•Â≠òÊ¥ª‰∏ÄÊÆµÊó∂Èó¥„ÄÇ Âæ™ÁéØÂºïÁî® Âæ™ÁéØÂºïÁî®Ôºàretain cycleÔºâÂèàÁß∞‰∏∫‚Äú‰øùÁïôÁéØ‚Äù„ÄÇÂΩ¢ÊàêÂæ™ÁéØÂºïÁî®ÁöÑÂéüÂõ†ÔºöÊòØÂØπË±°‰πãÈó¥‰∫íÁõ∏ÈÄöËøáÂº∫ÊåáÈíàÊåáÂêëÂØπÊñπÔºàÊàñËÄÖËØ¥‰∫íÁõ∏Âº∫ÊåÅÊúâÂØπÊñπÔºâ Âú®ÂºÄÂèë‰∏≠ÔºåÊàë‰ª¨‰∏çÂ∏åÊúõÂá∫Áé∞Âæ™ÁéØÂºïÁî®ÔºåÂõ†‰∏∫‰ºöÈÄ†ÊàêÂÜÖÂ≠òÊ≥ÑÊºè„ÄÇ Ëß£ÂÜ≥ÊñπÊ°àÔºöÊúâ‰∏ÄÊñπ‰ΩøÁî®Âº±ÂºïÁî®Ôºàweak referenceÔºâ,Ëß£ÂºÄÂæ™ÁéØÂºïÁî®ÔºåËÆ©Â§ö‰∏™ÂØπË±°ÂæóÂà∞ÈáäÊîæ„ÄÇ PSÔºöÂÖ≥‰∫éÂ¶Ç‰ΩïÊ£ÄÈ™åÈ°πÁõÆ‰∏≠ÊòØÂê¶ÊúâÂÜÖÂ≠òÊ≥ÑÊºèÔºö1„ÄÅÈùôÊÄÅÂÜÖÂ≠òÊ≥ÑÊºèÂàÜÊûêÊñπÊ≥ïÔºõ2„ÄÅÂä®ÊÄÅÂÜÖÂ≠òÊ≥ÑÊºèÂàÜÊûêÊñπÊ≥ï„ÄÇ ‰∫å„ÄÅ‰ª•ARCÁÆÄÂåñÂºïÁî®ËÆ°Êï∞Âú®ARCÁéØÂ¢É‰∏ãÔºåÁ¶ÅÊ≠¢Ë∞ÉÁî®Ôºöretain„ÄÅrelease„ÄÅautorelease„ÄÅdeallocÊñπÊ≥ï„ÄÇ ‰ΩøÁî®ARCÊó∂ÂøÖÈ°ªÈÅµÂæ™ÁöÑÊñπÊ≥ïÂëΩÂêçËßÑÂàôÔºö Ëã•ÊñπÊ≥ïÂêç‰ª•alloc„ÄÅnew„ÄÅcopy„ÄÅmutableCopyÂºÄÂ§¥ÔºåÂàôËßÑÂÆöËøîÂõûÁöÑÂØπË±°ÂΩíË∞ÉÁî®ËÄÖ„ÄÇ ÂèòÈáèÁöÑÂÜÖÂ≠òÁÆ°ÁêÜËØ≠‰πâÔºö ÂØπÊØî‰∏Ä‰∏ãMRCÂíåARCÂú®‰ª£Á†Å‰∏äÁöÑÂå∫Âà´ MRCÁéØÂ¢É‰∏ãÔºö ËøôÊ†∑‰ºöÂá∫Áé∞‰∏ÄÁßçËæπÁïåÊÉÖÂÜµÔºåÂ¶ÇÊûúÊñ∞ÂÄºÂíåÊóßÂÄºÊòØÂêå‰∏Ä‰∏™ÂØπË±°ÔºåÈÇ£‰πà‰ºöÂÖàÈáäÊîæÊéâÔºåobjectÂ∞±ÂèòÊàêÊÇ¨ÊåÇÊåáÈíà„ÄÇ ARCÁéØÂ¢É‰∏ãÔºö ARC‰ºöÁî®‰∏ÄÁßçÊõ¥ÂÆâÂÖ®ÁöÑÊñπÂºèËß£ÂÜ≥ËæπÁïåÈóÆÈ¢òÔºöÂÖà‰øùÁïôÊñ∞ÂÄºÔºåÂÜçÈáäÊîæÊóßÂÄºÔºåÊúÄÂêéÊõ¥Êñ∞ÂÆû‰æãÂèòÈáè„ÄÇ ÂêåÊó∂ÔºåARCÂèØ‰ª•ÈÄöËøá‰øÆÈ•∞Á¨¶Êù•ÊîπÂèòÂ±ÄÈÉ®ÂèòÈáèÂíåÂÆû‰æãÂèòÈáèÁöÑËØ≠‰πâÔºö ARCÂ¶Ç‰ΩïÊ∏ÖÁêÜÂÆû‰æãÂèòÈáèÔºö MRC‰∏≠ÔºåÂºÄÂèëËÄÖÈúÄË¶ÅÂú®dealloc‰∏≠Âä®ÊèíÂÖ•ÂøÖË¶ÅÁöÑÊ∏ÖÁêÜ‰ª£Á†ÅÔºàcleanup codeÔºâ„ÄÇ ËÄåARC‰ºöÂÄüÁî®Object-C++ÁöÑ‰∏ÄÈ°πÁâπÊÄßÊù•ÂÆåÊàêÊ∏ÖÁêÜ‰ªªÂä°ÔºåÂõûÊî∂OC++ÂØπË±°Êó∂Ôºå‰ºöË∞ÉÁî®C++ÁöÑÊûêÊûÑÂáΩÊï∞ÔºõËµ∞Â∫ïÂ±Ç.cxx_destructÊñπÊ≥ï„ÄÇËÄåÂΩìÈáäÊîæOCÂØπË±°Êó∂ÔºåARCÂú®.cxx_destructÂ∫ïÂ±ÇÊñπÊ≥ï‰∏≠Ê∑ªÂä†ÊâÄÈúÄË¶ÅÁöÑÊ∏ÖÁêÜ‰ª£Á†ÅÔºàËøô‰∏™ÊñπÊ≥ïÂ∫ïÂ±ÇÁöÑÊüê‰∏™Êó∂Êú∫‰ºöË∞ÉÁî®deallocÊñπÊ≥ïÔºâ„ÄÇ ‰∏çËøáÂ¶ÇÊûúÊúâÈùûOCÂØπË±°ÔºåËøòÊòØÈúÄË¶ÅÂÜôdeallocÊñπÊ≥ï„ÄÇÊØîÂ¶ÇCoreFoundation‰∏≠ÁöÑÂØπË±°ÊàñÊòØmalloc()ÂàÜÈÖçÂú®Â†Ü‰∏≠ÁöÑÂÜÖÂ≠ò‰æùÁÑ∂ÈúÄË¶ÅÊ∏ÖÁêÜ„ÄÇËøôÊó∂Ë¶ÅÈÄÇÊó∂Ë∞ÉÁî®CFRetain/CFRelease„ÄÇ ‰∏â„ÄÅdeallocÊñπÊ≥ï‰∏≠Âè™ÈáäÊîæÂºïÁî®Âπ∂Ëß£Èô§ÁõëÂê¨Ë∞ÉÁî®deallocÊñπÊ≥ïÊó∂ÔºåÂØπË±°Â∑≤ÁªèÂ§Ñ‰∫éÂõûÊî∂Áä∂ÊÄÅ‰∫Ü„ÄÇËøôÊó∂‰∏çËÉΩË∞ÉÁî®ÂÖ∂‰ªñÊñπÊ≥ïÔºåÂ∞§ÂÖ∂ÊòØÂºÇÊ≠•ÊâßË°åÊüê‰∫õ‰ªªÂä°ÂèàË¶ÅÂõûË∞ÉÁöÑÊñπÊ≥ï„ÄÇÂ¶ÇÊûúÂºÇÊ≠•ÊâßË°åÂÆåÂõûË∞ÉÁöÑÊó∂ÂÄôÂØπË±°Â∑≤ÁªèÊëßÊØÅÔºå‰ºöÁõ¥Êé•crash„ÄÇ deallocÊñπÊ≥ïÈáåË¶ÅÂÅö‰∫õÈáäÊîæÁõ∏ÂÖ≥ÁöÑ‰∫ãÊÉÖÔºåÊØîÂ¶ÇÔºö ÈáäÊîæÊåáÂêëÂÖ∂‰ªñÂØπË±°ÁöÑÂºïÁî®„ÄÇ ÂèñÊ∂àËÆ¢ÈòÖKVO„ÄÇ ÂèñÊ∂àNSNotificationÈÄöÁü•„ÄÇ ‰∏æ‰∏™Ê†óÂ≠ê: KVO: 12345678910111213141516171819202122232425262728293031- (void)viewDidLoad &#123; //.... [webView addObserver:self forKeyPath:@&quot;canGoBack&quot; options:NSKeyValueObservingOptionNew context:nil]; [webView addObserver:self forKeyPath:@&quot;canGoForward&quot; options:NSKeyValueObservingOptionNew context:nil]; [webView addObserver:self forKeyPath:@&quot;title&quot; options:NSKeyValueObservingOptionNew context:nil]; [webView addObserver:self forKeyPath:@&quot;estimatedProgress&quot; options:NSKeyValueObservingOptionNew context:nil];&#125;#pragma mark - KVO- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary&lt;NSKeyValueChangeKey,id&gt; *)change context:(void *)context&#123; self.backItem.enabled = self.webView.canGoBack; self.forwardItem.enabled = self.webView.canGoForward; self.title = self.webView.title; self.progressView.progress = self.webView.estimatedProgress; self.progressView.hidden = self.webView.estimatedProgress&gt;=1;&#125;- (void)dealloc &#123; [self.webView removeObserver:self forKeyPath:@&quot;canGoBack&quot;];//&lt; ÁßªÈô§KVO [self.webView removeObserver:self forKeyPath:@&quot;canGoForward&quot;]; [self.webView removeObserver:self forKeyPath:@&quot;title&quot;]; [self.webView removeObserver:self forKeyPath:@&quot;estimatedProgress&quot;];&#125; ``` * NSNotificationCenter: (void)viewDidLoad { //‚Ä¶‚Ä¶ // Ê∑ªÂä†ÂìçÂ∫îÈÄöÁü• [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(tabBarBtnRepeatClick) name:BQTabBarButtonDidRepeatClickNotification object:nil]; [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(titleBtnRepeatClick) name:BQTitleButtonDidRepeatClickNotification object:nil];} // ÁßªÈô§ÈÄöÁü• (void)dealloc { // [[NSNotificationCenter defaultCenter] removeObserver:self name:BQTabBarButtonDidRepeatClickNotification object:nil];// [[NSNotificationCenter defaultCenter] removeObserver:self name:BQTitleButtonDidRepeatClickNotification object:nil]; // ÊàñËÄÖ‰ΩøÁî®‰∏Ä‰∏™ËØ≠Âè•ÂÖ®ÈÉ®ÁßªÈô§ [[NSNotificationCenter defaultCenter] removeObserver:self]; } ### Âõõ„ÄÅÁºñÂÜô‚Äú ÂºÇÂ∏∏ÂÆâÂÖ®‰ª£Á†Å ‚ÄùÊó∂ÁïôÊÑèÂÜÖÂ≠òÁÆ°ÁêÜÈóÆÈ¢ò ÂºÇÂ∏∏Âè™Â∫îÂú®ÂèëÁîü‰∏•ÈáçÈîôËØØÂêéÊäõÂá∫„ÄÇ Áî®ÁöÑ‰∏çÂ•Ω‰ºöÈÄ†ÊàêÂÜÖÂ≠òÊ≥ÑÊºèÔºöÂú®tryÂùó‰∏≠ÔºåÂ¶ÇÊûú‰øùÁïô‰∫ÜÊüê‰∏™ÂØπË±°ÔºåÁÑ∂ÂêéÂú®ÈáäÊîæÂÆÉ‰πãÂâçÂèàÊäõÂá∫ÂºÇÂ∏∏ÔºåÈÇ£‰πàÈô§ÈùûcatchÂùóËÉΩËß£ÂÜ≥ÈóÆÈ¢òÔºåÂê¶ÂàôÂØπË±°ÊâÄÂç†ÂÜÖÂ≠òÂ∞±‰ºöÊ≥ÑÊºè„ÄÇ ÂéüÂõ†ÔºöC++ÁöÑÊûêÊûÑÂáΩÊï∞Áî±Object-CÁöÑÂºÇÂ∏∏Â§ÑÁêÜ‰æãÁ®ãÊù•ËøêË°å„ÄÇÁî±‰∫éÊäõÂá∫ÂºÇÂ∏∏‰ºöÁº©Áü≠ÁîüÂëΩÂë®ÊúüÔºåÊâÄ‰ª•ÂèëÁîüÂºÇÂ∏∏Êó∂ÂøÖÈ°ªÊûêÊûÑÔºå‰∏çÁÑ∂Â∞±ÂÜÖÂ≠òÊ≥ÑÊºèÔºåËÄåËøôÊó∂Â¶ÇÊûúÊñá‰ª∂Âè•ÊüÑÔºàfile handleÔºâÁ≠âÁ≥ªÁªüÂºÑËµÑÊ∫êÊ≤°ÊúâÊ≠£Á°ÆÊ∏ÖÁêÜÔºåÂ∞±‰ºöÂèëÁîüÂÜÖÂ≠òÊ≥ÑÊºè„ÄÇ ÊçïËé∑ÂºÇÂ∏∏Êó∂Ôºå‰∏ÄÂÆöË¶ÅÂ∞ÜtryÂùóÂÜÖÊâÄÂàõÁ´ãÁöÑÂØπË±°Ê∏ÖÁêÜÂπ≤ÂáÄ„ÄÇ ARC‰∏ãÔºåÁºñËØëÂô®ÈªòËÆ§‰∏çÁîüÊàêÂÆâÂÖ®Â§ÑÁêÜÂºÇÂ∏∏ÊâÄÈúÄÁöÑÊ∏ÖÁêÜ‰ª£Á†Å„ÄÇÂ¶ÇË¶ÅÂºÄÂêØÔºåËØ∑ÊâãÂä®ÊâìÂºÄÔºö-fobjc-arc-exceptionsÊ†áÂøó„ÄÇ‰ΩÜÂæàÂΩ±ÂìçÊÄßËÉΩ„ÄÇÊâÄ‰ª•Âª∫ËÆÆÊúÄÂ•ΩËøòÊòØ‰∏çË¶ÅÁî®„ÄÇ‰ΩÜÊúâÁßçÊÉÖÂÜµÊòØÂèØ‰ª•‰ΩøÁî®ÁöÑ:Object-C++Ê®°Âºè„ÄÇ PS:Âú®ËøêË°åÊúüÁ≥ªÁªüÔºåC++‰∏éObject-CÁöÑÂºÇÂ∏∏‰∫íÁõ∏ÂÖºÂÆπ„ÄÇ‰πüÂ∞±ÊòØËØ¥ÂÖ∂‰∏≠‰ªª‰∏ÄËØ≠Ë®ÄÊäõÂá∫ÁöÑÂºÇÂ∏∏ÔºåËÉΩÁî®Âè¶‰∏ÄËØ≠Ë®ÄÊâÄÁºñÁöÑ‚ÄúÂºÇÂ∏∏Â§ÑÁêÜÁ®ãÂ∫è‚ÄùÊçïËé∑„ÄÇËÄåÂú®ÁºñÂÜôObject-C++‰ª£Á†ÅÊó∂ÔºåC++Â§ÑÁêÜÂºÇÂ∏∏ÊâÄÁî®ÁöÑ‰ª£Á†Å‰∏éARCÂÆûÁé∞ÁöÑÈôÑÂä†‰ª£Á†ÅÁ±ª‰ººÔºåÁºñËØëÂô®Ëá™Âä®ÊâìÂºÄ-fobjc-arc-exceptionsÊ†áÂøóÔºåÂÖ∂ÊÄßËÉΩÊçüÂ§±‰∏çÂ§ß„ÄÇ ÊúÄÂêéÔºåËøòÊòØÂª∫ËÆÆÔºö * ÂºÇÂ∏∏Âè™Áî®‰∫éÂ§ÑÁêÜ‰∏•ÈáçÈîôËØØÔºàfatal errorÔºåËá¥ÂëΩÈîôËØØÔºâ * ÂØπ‰∫é‰∏Ä‰∫õ‰∏çÈÇ£‰πà‰∏•ÈáçÁöÑÈîôËØØÔºànofatal errorÔºåÈùûËá¥ÂëΩÈîôËØØÔºâ,Êúâ‰∏§ÁßçËß£ÂÜ≥ÊñπÊ°àÔºö 1„ÄÅËÆ©ÂØπË±°ËøîÂõûnilÊàñËÄÖ0Ôºà‰æãÂ¶ÇÔºöÂàùÂßãÂåñÁöÑÂèÇÊï∞‰∏çÂêàÊ≥ïÔºåÊñπÊ≥ïËøîÂõûnilÊàñ0Ôºâ 2„ÄÅ‰ΩøÁî®NSError ### ‰∫î„ÄÅ‰ª•Âº±ÂºïÁî®ÈÅøÂÖçÂæ™ÁéØÂºïÁî®ÔºàÈÅøÂÖçÂÜÖÂ≠òÊ≥ÑÊºèÔºâ * ‰∏∫‰∫ÜÈÅøÂÖçÂõ†Âæ™ÁéØÂºïÁî®ËÄåÈÄ†ÊàêÂÜÖÂ≠òÊ≥ÑÊºè„ÄÇËøôÊó∂ÔºåÊüê‰∫õÂºïÁî®ÈúÄË¶ÅËÆæÁΩÆ‰∏∫Âº±ÂºïÁî®ÔºàweakÔºâ * ‰ΩøÁî®Âº±ÂºïÁî®weakÔºåARC‰∏ãÔºåÂØπË±°ÈáäÊîæÊó∂ÔºåÊåáÈíà‰ºöÁΩÆ‰∏∫nil„ÄÇ ### ÂÖ≠„ÄÅ‰ª• ‚ÄúËá™Âä®ÈáäÊîæÊ±†Âùó‚Äù Èôç‰ΩéÂÜÖÂ≠òÂ≥∞ÂÄº * ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºöËá™Âä®ÈáäÊîæÊ±†ÈúÄË¶ÅÁ≠âÂæÖÁ∫øÁ®ãÊâßË°å‰∏ã‰∏ÄÊ¨°‰∫ã‰ª∂Âæ™ÁéØÊó∂ÊâçÊ∏ÖÁ©∫ÔºåÈÄöÂ∏∏forÂæ™ÁéØ‰ºö‰∏çÊñ≠ÂàõÂª∫Êñ∞ÂØπË±°Âä†ÂÖ•Ëá™Âä®ÈáäÊîæÊ±†ÈáåÔºåÂæ™ÁéØÁªìÊùüÊâçÈáäÊîæ„ÄÇÂõ†Ê≠§ÔºåÂèØËÉΩ‰ºöÂç†Áî®Â§ßÈáèÂÜÖÂ≠ò„ÄÇ * ÊâãÂä®Âä†ÂÖ•Ëá™Âä®ÈáäÊîæÊ±†Â≠êÔºà@autoreleasepoolÔºâÔºöÊØèÊ¨°forÂæ™ÁéØÈÉΩ‰ºöÁõ¥Êé•ÈáäÊîæÂÜÖÂ≠òÔºå‰ªéËÄåÈôç‰Ωé‰∫ÜÂÜÖÂ≠ò‰∏∫Â≥∞ÂÄº„ÄÇ Â∞§ÂÖ∂ÔºåÂú®ÈÅçÂéÜÂ§ÑÁêÜ‰∏Ä‰∫õÂ§ßÊï∞ÁªÑÊàñËÄÖÂ§ßÂ≠óÂÖ∏Êó∂ÔºåÂèØ‰ª•‰ΩøÁî®Ëá™Âä®ÈáäÊîæÊ±†Êù•Èôç‰ΩéÂÜÖÂ≠òÂ≥∞ÂÄºÔºå‰æãÂ¶ÇÔºö NSArray qiShare = /‰∏Ä‰∏™ÂæàÂ§ßÁöÑÊï∞ÁªÑ/NSMutableArray qiShareMembersArray = [NSMutableArray new];for (NSStirng name in qiShare) { @autoreleasepool { QiShareMember member = [QiShareMember alloc] initWithName:name]; [qiShareMembersArray addObject:member]; }}```PSÔºöËá™Âä®ÈáäÊîæÊ±†ÁöÑÂéüÁêÜÔºöÊéíÂ∏ÉÂú®‚ÄúÊ†à‚Äù‰∏≠ÔºåÂØπË±°ÊâßË°åautoreleaseÊ∂àÊÅØÂêéÔºåÁ≥ªÁªüÂ∞ÜÂÖ∂ÊîæÂÖ•ÊúÄÈ°∂Á´ØÁöÑÊ±†ÈáåÔºàËøõÊ†àÔºâÔºåËÄåÊ∏ÖÁ©∫Ëá™Âä®ÈáäÊîæÊ±†Â∞±ÊòØÊääÂØπË±°ÈîÄÊØÅÔºàÂá∫Ê†àÔºâ„ÄÇËÄåË∞ÉÁî®Âá∫Ê†àÁöÑÊó∂Êú∫ÔºöÂ∞±ÊòØÂΩìÂâçÁ∫øÁ®ãÊâßË°å‰∏ã‰∏ÄÊ¨°‰∫ã‰ª∂Âæ™ÁéØÊó∂„ÄÇ ‰∏É„ÄÅÁî® ‚ÄúÂÉµÂ∞∏ÂØπË±°‚Äù Ë∞ÉËØïÂÜÖÂ≠òÁÆ°ÁêÜÈóÆÈ¢ò Â¶Ç‰∏äÂõæÔºåÂãæÈÄâËøôÈáåÂèØ‰ª•ÂºÄÂêØÂÉµÂ∞∏ÂØπË±°ËÆæÁΩÆ„ÄÇÂºÄÂêØ‰πãÂêéÔºåÁ≥ªÁªüÂú®ÂõûÊî∂ÂØπË±°Êó∂Ôºå‰∏çÂ∞ÜÂÖ∂ÁúüÊ≠£ÁöÑÂõûÊî∂ÔºåËÄåÊòØÊääÂÆÉÁöÑisaÊåáÈíàÊåáÂêëÁâπÊÆäÁöÑÂÉµÂ∞∏Á±ªÔºàzombie classÔºâÔºåÂèòÊàêÂÉµÂ∞∏ÂØπË±°„ÄÇÂÉµÂ∞∏Á±ªËÉΩÂ§üÂìçÂ∫îÊâÄÊúâÁöÑÈÄâÊã©Â≠êÔºåÂìçÂ∫îÊñπÂºè‰∏∫ÔºöÊâìÂç∞‰∏ÄÊù°ÂåÖÂê´Ê∂àÊÅØÂÜÖÂÆπ‰ª•ÂèäÂÖ∂Êé•Êî∂ËÄÖÁöÑÊ∂àÊÅØÔºåÁÑ∂ÂêéÁªàÊ≠¢Â∫îÁî®Á®ãÂ∫è„ÄÇ ÂÉµÂ∞∏ÂØπË±°ÁÆÄÂçïÂéüÁêÜÔºöÂú®Objective-CÁöÑËøêË°åÊúüÁ®ãÂ∫èÂ∫ì„ÄÅFoundationÊ°ÜÊû∂‰ª•ÂèäCoreFoundationÊ°ÜÊû∂ÁöÑÂ∫ïÂ±ÇÂä†ÂÖ•‰∫ÜÂÆûÁé∞‰ª£Á†Å„ÄÇÂú®Á≥ªÁªüÂç≥Â∞ÜÂõûÊî∂ÂØπË±°Êó∂ÔºåÈÄöËøá‰∏Ä‰∏™ÁéØÂ¢ÉÂèòÈáèNSZombieEnabledËØÜÂà´ÊòØÂÉµÂ∞∏ÂØπË±°‚Äî‚Äî‰∏çÂΩªÂ∫ïÂõûÊî∂ÔºåisaÊåáÈíàÊåáÂêëÂÉµÂ∞∏Á±ªÂπ∂‰∏îÂìçÂ∫îÊâÄÊúâÈÄâÊã©Â≠ê„ÄÇ ÂÖ´„ÄÅ‰∏çË¶Å‰ΩøÁî®retainCountÂú®ËãπÊûúÂºïÂÖ•ARC‰πãÂêéretainCountÂ∑≤ÁªèÊ≠£ÂºèÂ∫üÂºÉÔºå‰ªª‰ΩïÊó∂ÂÄôÈÉΩÊ≤°Ê≥ïË∞ÉÁî®Ëøô‰∏™retainCountÊñπÊ≥ïÊù•Êü•ÁúãÂºïÁî®ËÆ°Êï∞‰∫ÜÔºåÂõ†‰∏∫Ëøô‰∏™ÂÄºÂÆûÈôÖ‰∏äÂ∑≤ÁªèÊ≤°ÊúâÂáÜÁ°ÆÊÄß‰∫ÜÔºàËÄå‰∏îÂú®ARCÁéØÂ¢É‰∏ã‰πüË∞ÉÁî®‰∏ç‰∫ÜÔºâ„ÄÇ‰ΩÜÊòØÂú®MRC‰∏ãËøòÊòØÂèØ‰ª•Ê≠£Â∏∏‰ΩøÁî®ÁöÑ„ÄÇ]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>ÂÜÖÂ≠òÁÆ°ÁêÜ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOSËÖæËÆØBugly‰ΩøÁî®]]></title>
    <url>%2F2018%2F11%2F06%2FiOS%E8%85%BE%E8%AE%AFBugly%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[#iOSËÖæËÆØBugly‰ΩøÁî® Bugly ÂàõÂª∫ È¶ñÂÖàËøõÂÖ•BuglyÂÆòÁΩëÔºöBuglyÂÆòÁΩë,ÁÇπÂáªÁ´ãÂç≥Êé•ÂÖ•ÔºåÁî®qqÁôªÈôÜÂêéÁÇπÂáªÊàëÁöÑ‰∫ßÂìÅÔºåÊñ∞Âª∫‰∏Ä‰∏™‰∫ßÂìÅÔºåÁÑ∂ÂêéÂ°´ÂÜô‰∫ßÂìÅ‰ø°ÊÅØÔºå‰øùÂ≠ò ÁÑ∂ÂêéÂ∞ÜBuglyÈõÜÊàêÂà∞È°πÁõÆ‰∏≠ÔºåËøôÈáåÊàëÁî®ÁöÑÊòØcocoapods ÈõÜÊàêÁöÑBugly pod &apos;Bugly&apos; ÁÑ∂ÂêéÂú®Â∑•Á®ã‰∏≠ÂàùÂßãÂåñBuglyÔºå‰∏ÄÂè•‰ª£Á†ÅÊêûÂÆöAPPIDÊòØÂøÖÂ°´ÁöÑÔºåÂú®ÊàëÁöÑ‰∫ßÂìÅ‰∏≠ÁÇπÂáªËÆæÁΩÆËé∑Âèñ ÈÖçÁΩÆÂÆåÊàê‰πãÂêéËøêË°åÂá∫Áé∞bugÂêéÂ∞±ÂèØ‰ª•ÊçïËé∑ÂºÇÂ∏∏‰∫ÜÔºåÂú®Â¥©Ê∫ÉÂàÜÊûê‰∏≠Êü•ÁúãÔºå‰ΩÜÊòØÊàë‰ª¨Âè™ÁúãÂà∞‰∫ÜÂú®Âì™‰∏™ÊñπÊ≥ïÈáåÈáåÊä•ÈîôÔºåÂπ∂‰∏çÁü•ÈÅìÂ¥©Ê∫ÉÂÖ∑‰ΩìÂú®Âì™‰∏ÄË°åÔºåÊâÄ‰ª•Êàë‰ª¨ËøòË¶ÅÈÖçÁΩÆÁ¨¶Âè∑Ë°® ÂÖ≥‰∫éÁ¨¶Âè∑Ë°®ÂÆòÁΩëÊúâËØ¶ÁªÜ‰ªãÁªçÂ¶Ç‰Ωï‰ΩøÁî®Ôºö Á¨¶Âè∑Ë°® ‰∏ä‰º†Á¨¶Âè∑Ë°®Ôºö‰∏§ÁßçÊñπÂºèÔºåÂàÜÂà´ÊòØËá™Âä®Ë∑üÊâãÂä®Ëá™Âä®ÈÖçÁΩÆ: ‰∏çÈúÄË¶ÅjavaËøêË°åÁéØÂ¢ÉÔºåÂú®ËÑöÊú¨ÈáåÈù¢Â°´ÂÜôÁõ∏ÂÖ≥‰ø°ÊÅØÔºå Áõ¥Êé•Âú®XcodeÁºñËØëÊâßË°åËÑöÊú¨Âç≥ÂèØÔºåÂÆòÁΩë‰∏äÊúâÂÜôÔºåÈùûÂ∏∏Êñπ‰æøÁÆÄÂçïÔºå‰ΩÜÂú®ÁºñËØëÁöÑÊó∂ÂÄôÊØîËæÉÊÖ¢ÈáçÁÇπËÆ≤‰∏ãÊâãÂä®ÈÖçÁΩÆÔºö ÂÆòÊñπÁöÑÁ¨¶Âè∑Ë°®Â∑•ÂÖ∑iOSÊñáÊ°£Áâà¬≠‰ΩøÁî®ÊåáÂçó‰∏çÊòØÂæàÈÄö‰øóÊòìÊáÇÔºå‰∏ãÈù¢ÊàëÂÜçÂÜô‰∏Ä‰∏™Êõ¥Áõ¥ËßÇÁöÑÊïôÁ®ãÔºåÊñπ‰æøÂ§ßÂÆ∂ÈòÖËØª„ÄÇ ÈÖçÁΩÆÁéØÂ¢É ÁÇπÂáªJavaËøêË°åÁéØÂ¢É‰∏ãËΩΩ(JREÊàñJDKÁâàÊú¨ÈúÄË¶Å&gt;=1.6ÔºåÊàë‰∏ãÁöÑÊòØ9.0.4) „ÄÇ ÂÆâË£ÖËøáÂêé,Êü•ÁúãÊòØÂê¶ÂÆâË£ÖÊàêÂäüÔºåÊâìÂºÄÁªàÁ´Ø,Âú®ÁªàÁ´ØËæìÂÖ•java -version Ëé∑ÂèñdSYMÊñá‰ª∂ dSYMÊñá‰ª∂ÊòØÊåáÂÖ∑ÊúâË∞ÉËØï‰ø°ÊÅØÁöÑÁõÆÊ†áÊñá‰ª∂,Âú®ProductsÈáåÈù¢Âè≥Âáª Show in Finder Â¶ÇÂõæÊâÄÁ§∫ÔºåÂ¶ÇÊûúÁºñËØëÂêéÊ≤°ÊúâdSYMÊñá‰ª∂ËØ¥ÊòéÊòØDugÁºñËØëÁöÑÔºåÂ¶ÇÊûúË¶ÅÂú®DebugÁéØÂ¢É‰πüËÉΩÊàêdSYMÊñá‰ª∂ÔºåÊâÄ‰ª•Ë¶ÅÂÅöÂ¶Ç‰∏ãËÆæÁΩÆ: ÂÆûÈôÖÈ°πÁõÆ‰∏≠ÊàëÊ≤°ÊúâËÆæÁΩÆÔºåÂõ†‰∏∫ÊàëÊòØÈÄöËøáÊâìÂåÖÂêéËé∑ÂèñÁöÑdSYMÊñá‰ª∂ ÁîüÊàêÁ¨¶Âè∑Ë°®Êñá‰ª∂ 3.1‰∏ãËΩΩÊúÄÊñ∞ÁâàBugly iOSÁ¨¶Âè∑Ë°®Â∑•ÂÖ∑ ÈÄâ‰∏Ä‰∏™‰ΩçÁΩÆÂàõÂª∫‰∏Ä‰∏™Êñá‰ª∂Â§πÔºåÂ∞Ü‚ÄùbuglySymboliOS.jar‚ÄùÊîæÂÖ•Êñá‰ª∂Â§πÈáåÈù¢ ÔºåÊàëËá™Â∑±ÊòØÂú®Ê°åÈù¢ÂàõÂª∫‰∫Ü‚ÄùtestBugly‚Äù,ÁÑ∂ÂêéÂ∞Ü‚ÄùbuglySymboliOS.jar‚ÄùÊîæÂÖ•ËøõÂéª‰∫Ü ÊúÄÂêé‰ΩøÁî®JARÂåÖË∑üdSYMÂú®ÁªàÁ´ØÁîüÊàêÁ¨¶Âè∑Ë°®Êñá‰ª∂ Âú®ÁªàÁ´ØÊâßË°å‰ª•‰∏ãÂëΩ‰ª§:java -jar jarÂåÖË∑ØÂæÑ -i dSYMÊñá‰ª∂Ë∑ØÂæÑ ‰∏ä‰º†Á¨¶Âè∑Ë°®Âà∞Âà∞Êàë‰∫ßÂìÅ„ÄÇÂ¶ÇÂõæ: ‰πãÂâçÁî®Ëá™Âä®Á¨¶Âè∑Ë°®ÁîüÊàê‰∫Ü‰∏Ä‰∫õÔºåÊâÄ‰ª•Á¨¶Âè∑Ë°®Êñá‰ª∂ÊúâÁÇπÂ§ö„ÄÇ ÊúÄÂêéÂ∞±ÂèØ‰ª•Âú®È°πÁõÆ‰∏≠ÊÑâÂø´ÁöÑÁúãÂà∞bugÂá∫Áé∞Âú®Âì™‰∏™Á±ªÂì™‰∏ÄË°å‰ª£Á†Å‰∏ä‰∫Ü]]></content>
      <categories>
        <category>learn</category>
      </categories>
      <tags>
        <tag>Bugly</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Xcode10ÂçáÁ∫ßÂêéÁöÑÈóÆÈ¢ò]]></title>
    <url>%2F2018%2F11%2F05%2FXcode10%E5%8D%87%E7%BA%A7%E5%90%8E%E7%9A%84%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[Xcode 10 Error ÈáçÂ§çÁöÑinfo.plistÊñá‰ª∂Âà†Èô§ÊéâÂ§ö‰ΩôÁöÑinfo.plistÊñá‰ª∂,ÈáçÊñ∞ÁºñËØëÂç≥ÂèØ(ÊàëÊòØÊâãÂä®Ê∑ªÂä†‰∫ÜMasonryÁöÑÂ∫ì,ÂÖ∂‰∏≠MasonryÂ∫ì‰∏≠Â∏¶Êúâinfo.plistÊñá‰ª∂‚ÄìÂà†Èô§) Multiple commands produce‰øÆÊîπXcodeÁºñËØëÈÖçÁΩÆXcode-&gt;File-&gt;Project Settings/Workspace Setting-&gt; Build System -&gt; Legacy Build System. Copy Pods ResourcesÂ§±ÊïàÈúÄË¶ÅÂçáÁ∫ßCocoaPodsÁâàÊú¨&gt;=1.4.0‰ª•‰∏ä, ÂèØËßÅGithub‰∏äÁöÑ‰∏Ä‰∏™issues Xcode10 beta can‚Äôt load bundles from CocoaPods #Ëß£ÂÜ≥ibrary not found for -lstdc++.6.0.9 ÁúüÊú∫Ôºö/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk/usr/lib/ Ê®°ÊãüÂô®Ôºö/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/usr/lib/ È¶ñÂÖàÊâìÂºÄÈìæÊé•‰∏ãËΩΩlibstdc++.6.0.9.tbdÔºõlibstdc++.6.0.9.tbd‰∏ãËΩΩÂú∞ÂùÄÂØÜÁ†ÅÔºöyc0m ËøõÂÖ•Âà∞‰∏äËø∞ÁõÆÂΩï‰∏ãÔºåÊäälibstdc++.6.0.9.tbdÂ§çÂà∂ËøõÂéªÔºõ]]></content>
      <categories>
        <category>learn</category>
      </categories>
      <tags>
        <tag>Xcode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iOS‰πãRNÁéØÂ¢ÉÊê≠Âª∫]]></title>
    <url>%2F2018%2F10%2F10%2FiOS%E4%B9%8BRN%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%2F</url>
    <content type="text"><![CDATA[React Native-iOSÁéØÂ¢ÉÊê≠Âª∫ React Native ‰∏ªË¶Å‰æùËµñ‰ª•‰∏ãÁéØÂ¢É: Mac OS X Êìç‰ΩúÁ≥ªÁªü Xcode,Êé®Ëçê‰ΩøÁî®7.3.0ÊàñËÄÖÊõ¥È´òÁ≥ªÁªü Node.js V6.2.1ÊàñËÄÖÊúÄÊñ∞ÁâàÊú¨ WatchmanÂíåworkflow NVM ‰∏ãËΩΩXcodeÔºåËøô‰∏™Â∞±‰∏çÂ§öËÆ≤‰∫ÜÔºåÁõ¥Êé•Âú®App Store‰∏ãËΩΩÂç≥ÂèØÂÆâË£ÖNode.jsÔºåÂè™Ë¶ÅÁôæÂ∫¶ÊêúÁ¥¢Node.jsÔºåËøõÂÖ•Node.jsÂÆòÁΩëÔºåÁõ¥Êé•‰∏ãËΩΩÂÆâË£ÖHomebrew, ÊâìÂºÄ HomebrewÂÆòÁΩë, ËØ≠Ë®ÄÈÄâÊã©ÁÆÄ‰Ωì‰∏≠Êñá, ÊåâÁÖßÊñáÊ°£Ê≠•È™§ËøõË°åÂÆâË£ÖÂç≥ÂèØÊâìÂºÄÁªàÁ´Ø‰æùÊ¨°ËæìÂÖ•ÂëΩ‰ª§ÔºöÂÆâË£ÖHomebrew:1ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot; ÂÆâË£ÖNode:123brew install node``` ### ÂÆâË£ÖYarn npm install -g yarn react-native-cli1### ÂÆâË£ÖWatchman brew install watchman1### ÂÆâË£ÖFlow brew install flow12 brew update &amp;&amp; brew upgrade1### ÂÆâË£ÖNVM git clone https://github.com/creationix/nvm123``` cd nvm/``` ls123```source nvm.sh``` nvm123```nvm ls -remote N/A``` nvm ls12345## ÁéØÂ¢ÉÊê≠Âª∫ÂÆåÊØï ## ÂàõÂª∫È°πÁõÆ - Âú®Ê°åÈù¢ÂàõÂª∫‰∏Ä‰∏™Êñá‰ª∂Â§πHelloWorld- ÊâìÂºÄÁªàÁ´ØËøõÂÖ•Ê≠§Êñá‰ª∂Â§πÔºàcdÔºâ- ÁªàÁ´ØËæìÂÖ•: react-native init HelloWorld``` Âú®xcode‰∏≠Ôºå‰ΩøÁî®Âø´Êç∑ÈîÆcmd + RÂç≥ÂèØÂêØÂä®È°πÁõÆ„ÄÇÂü∫Êú¨ÁöÑXcodeÂäüËÉΩÂèØ‰ª•ÁÜüÊÇâÔºåÊØîÂ¶ÇÊ®°ÊãüÂô®ÁöÑÈÄâÊã©Á≠â„ÄÇÂêØÂä®ÂÆåÊàêÂêéÔºå‰Ω†‰ºöÁúãÂà∞React-PackgerÂíåiOSÊ®°ÊãüÂô®ÔºåÂÖ∑‰ΩìÁöÑÊïàÊûúÂ¶Ç‰∏ãÔºåËØ¥Êòé‰Ω†ÂàõÂª∫È°πÁõÆÊàêÂäü‰∫Ü„ÄÇ]]></content>
      <categories>
        <category>iOS</category>
      </categories>
      <tags>
        <tag>ReactNative</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊàëÁöÑÁ¨¨‰∏ÄÁØáÊñáÁ´†]]></title>
    <url>%2F2018%2F02%2F06%2F%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E6%96%87%E7%AB%A0%2F</url>
    <content type="text"><![CDATA[ÊàëÁöÑÁ¨¨‰∏ÄÁØáÊñáÁ´†test ‚Äì (ÂÆûÁ∫ø) (ËôöÁ∫ø) 1.ÊµãËØïÂ≠ó‰Ωì1.1ÊµãËØïÂ≠ó‰Ωì(2018-2-6)Êú¨ÊÆµ‰∏∫Ê≠£ÊñáÊ≠£Êñá‚ÄìÔºàÂèòÊñúÔºâÊ≠£Êñá‚ÄìÔºàÂä†Á≤óÔºâÔºå2018-2-8Êõ¥Êñ∞„ÄÅÊú¨È°µË∑≥ËΩ¨ÁôæÂ∫¶„ÄÅÊú¨È°µË∑≥ËΩ¨MacDownÁî®Ê≥ïÂéüÈìæÊé•„ÄÇ ÂàÜÁ±ªÔºötest Ëá≥ ÂàÜÁ±ªÔºölearn Ëøô‰∏§ÁØáÊñáÁ´†Áõ∏ÈöîÁîö‰πÖÔºåÊúüÈó¥ÂèëÁîü‰∫Ü‰∫õ‰ªÄ‰πàÂë¢ÔºåÊàë‰πüÂøòÂæóÂ∑Æ‰∏çÂ§ö‰∫ÜÔºåÂ∫îËØ•ÊòØÂú®ÂøôÁùÄÂºÄ(fa)Âèë(dai)ÂêßüòÅ„ÄÇ‰∏∫Âï•ÂºÄÂêØÁ¨¨‰∏ÄÁØáÂë¢ÔºåÂ∫îËØ•ÊòØËøáÂπ¥Â∞ÜËøëÔºåÊó†ÈúÄÂºÄÂèëÔºåÂè™ÈúÄÂÖâÊòéÊ≠£Â§ßÁöÑÂèëÂëÜÂ∞±Â§ü‰∫ÜÔºåÂòªÂòªÂòªÔºÅÁ¨¨‰∏ÄÁØáÊñáÁ´†Êàë‰πü‰∏çÊôìÂæóÂÜô‰∫õÂï•Â≠êÔºå‰ΩÜÊòØËøòÊòØÊÉ≥ÂÜôÔºåËá™‰ªétestÊñáÁ´†ÁªìÊùüÂêéÔºåÊàëÂØπ‰∫éMacDownÁöÑÁî®Ê≥ïËøòÊòØÈùûÂ∏∏ÈôåÁîüÁöÑÔºåÊâÄ‰ª•ËøôÊ¨°ÊàëËøòÊòØÂÖàÂÜô(Command+C,Command+V)‰∏ÄÁØáMacDownÁöÑÁî®Ê≥ï,ÂΩìÁÑ∂‰∏äÈù¢‰πüÈôÑ‰∏ä‰∫ÜÂéüÈìæÊé•ÁöÑÂú∞ÂùÄÔºåÊàëÂèØ‰∏çÊòØ‰º∏ÊâãÂÖöüòùÔºå‰∏∫‰∫ÜÁªôÂ§ßÂÆ∂ÁúãÁúãÔºå‰∏ªË¶ÅËøòÊòØ‰∏∫‰∫ÜËá™Â∑±‰πãÂêéÂÜôÁöÑÊó∂ÂÄôËøòÈúÄË¶ÅÂéªÁôæÂ∫¶ÔºåÂí¶~~~ÔºåÂ§™lowÂíØÔºÅÔºÅÔºÅ 2.‰∏ãËΩΩÈìæÊé• 3.Á∫øÊ°Ü123Á∫øÊ°ÜÁ¨¨‰∏ÄË°åÁ∫øÊ°ÜÁ¨¨‰∫åË°åÁ∫øÊ°ÜÁ¨¨‰∏âË°å 4.ÂàóË°®Êó†Â∫èÂàóË°® 1(Ê≥®ÊÑè‰∏≠Èó¥ÊúâÁ©∫Ê†º) 2 3 ÊúâÂ∫èÂàóË°® 1(Ê≥®ÊÑè‰∏≠Èó¥ÊúâÁ©∫Ê†º) 2 3 5.ËøûÁ∫ø5.1ËøûÁ∫ø 1(Ê≥®ÊÑè‰∏≠Èó¥ÊúâÁ©∫Ê†º) 2 3 ÊñáÂ≠óÂàÜÂâ≤ 5.2ËøûÁ∫øËøûÁ∫ø 1(Ê≥®ÊÑè‰∏≠Èó¥ÊúâÁ©∫Ê†º) 2 3 ÊñáÂ≠óÂàÜÂâ≤ ÂâçÈù¢Êúâ5‰∏™Á©∫Ê†º 5.3 ËøûÁ∫ø 1(Ê≥®ÊÑè‰∏≠Èó¥ÊúâÁ©∫Ê†º) 2 3 6.Ë°®Ê†ºÁ¨¨‰∏ÄË°åÁ¨¨‰∏ÄÂàóÁ¨¨‰∏ÄË°åÁ¨¨‰∫åÂàóÁ¨¨‰∏ÄË°åÁ¨¨‰∏âÂàóÁ¨¨‰∫åË°åÁ¨¨‰∏ÄÂàóÁ¨¨‰∫åË°åÁ¨¨‰∫åÂàó,Ê≠§Ê†ºÂç†2Ê†ºÁ¨¨‰∏âË°åÁ¨¨‰∏ÄÂàóÔºåÊ≠§Ê†ºÂç†3Ê†º 2018-2-8Êõ¥Êñ∞ 1.Âà†Èô§ÊïàÊûúÂà†Èô§ 2.ÊòæÁ§∫ÂõæÁâá2.1ÊòæÁ§∫ÁΩëÁªúÂõæÁâá2.2ÊòæÁ§∫Êú¨Âú∞ÂõæÁâá3.Ë°®Ê†º‰ΩøÁî®Êñ∞ÊñπÊ≥ïÔºö Á¨¨‰∏ÄÂàó Á¨¨‰∫åÂàó Á¨¨‰∏âÂàó aaaa bbbb cccc 4.‰ª£Á†ÅÊòæÁ§∫ÔºöleftView = [[UIView alloc]init]; 5.Ë°®Á§∫ÂºïÁî® ‰∏ÄÁõèÁÅØÔºå‰∏ÄÁâáÈªÑÊòèÔºõ 6.ÁâπÊÆäÁ¨¶Âè∑hello ¬©ÊñáÂ≠óÂ±Ö‰∏≠]]></content>
      <categories>
        <category>learn</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MaoLuJun ÁöÑÂçöÂÆ¢]]></title>
    <url>%2F2018%2F01%2F02%2Fblog%2F</url>
    <content type="text"><![CDATA[Ê¨¢ËøéÊù•Âà∞ÊàëÁöÑÂçöÂÆ¢ÔºÅÔºÅÔºÅ ÂçöÂÆ¢ÂÜÖÂÆπÂ∑•‰ΩúÊâÄÂæóÂ∑•‰ΩúÔºöiOSÂºÄÂèëÔºåÂπ≥Êó∂ÂÅöÈ°πÁõÆÁöÑÊó∂ÂÄôÔºåÈÉΩ‰ºö‰∫ãÂÖàÂÜô‰∏Ä‰∏™demoÔºåÁÑ∂ÂêéÂú®ÂêàÂπ∂Âà∞È°πÁõÆ‰∏≠Âéª„ÄÇÂΩìÈ°πÁõÆÂÆåÊàêÂêéÔºå‰ºöÂ∞ÜdemoÊîæÂà∞ÂçöÂÆ¢‰∏≠Êù•Ôºå‰πüÂΩìÂÅö‰∏ÄÁßçÂ∑•‰ΩúËÆ∞ÂΩï„ÄÇ ÁîüÊ¥ªÊâÄÂæóÁîüÊ¥ªÔºöÂèëÂëÜÁöÑÁîüÊ¥ª„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ„ÄÇ ÂøÉÊÉÖÂøÉÊÉÖÔºö„ÄÇ„ÄÇ„ÄÇ„ÄÇ ÈìæÊé•My GitHub]]></content>
      <categories>
        <category>test</category>
      </categories>
      <tags>
        <tag>maolujun</tag>
        <tag>hexo</tag>
        <tag>GitHub</tag>
      </tags>
  </entry>
</search>
